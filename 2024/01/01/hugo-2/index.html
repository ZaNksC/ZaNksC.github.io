<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>【Hugo】进阶篇：PaperMod主题美化 | 乱话三千</title>
<meta name="keywords" content="Hugo, PaperMod, 建站">
<meta name="description" content="装修一下旧时代的船，才能开门迎接更多的客人。">
<meta name="author" content="Zanks">
<link rel="canonical" href="https://www.zanks.link/2024/01/01/hugo-2/">

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <meta name="referrer" content="no-referrer-when-downgrade">
<link crossorigin="anonymous" href="/assets/css/stylesheet.136f34290e27eb76ea098a70b7663543e1d9be477ed613ae4b00099a5641df2e.css" integrity="sha256-E280KQ4n63bqCYpwt2Y1Q&#43;HZvkd&#43;1hOuSwAJmlZB3y4=" rel="preload stylesheet" as="style">
<script src="https://kit.fontawesome.com/4f00e1f6e6.js" crossorigin="anonymous"></script>
<link rel="icon" href="https://www.zanks.link/assets/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.zanks.link/assets/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.zanks.link/assets/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://www.zanks.link/assets/apple-touch-icon.png">
<link rel="mask-icon" href="https://www.zanks.link/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="https://www.zanks.link/2024/01/01/hugo-2/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-420MPRSEER"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-420MPRSEER');
</script><meta property="og:url" content="https://www.zanks.link/2024/01/01/hugo-2/">
  <meta property="og:site_name" content="乱话三千">
  <meta property="og:title" content="【Hugo】进阶篇：PaperMod主题美化">
  <meta property="og:description" content="装修一下旧时代的船，才能开门迎接更多的客人。">
  <meta property="og:locale" content="zh-cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-01-01T02:00:00+08:00">
    <meta property="article:modified_time" content="2024-12-30T15:50:21+08:00">
    <meta property="article:tag" content="Hugo">
    <meta property="article:tag" content="PaperMod">
    <meta property="article:tag" content="建站">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="【Hugo】进阶篇：PaperMod主题美化">
<meta name="twitter:description" content="装修一下旧时代的船，才能开门迎接更多的客人。">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "📖 文章",
      "item": "https://www.zanks.link/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "【Hugo】进阶篇：PaperMod主题美化",
      "item": "https://www.zanks.link/2024/01/01/hugo-2/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "【Hugo】进阶篇：PaperMod主题美化",
  "name": "【Hugo】进阶篇：PaperMod主题美化",
  "description": "装修一下旧时代的船，才能开门迎接更多的客人。",
  "keywords": [
    "Hugo", "PaperMod", "建站"
  ],
  "articleBody": " 装修一下旧时代的船，才能开门迎接更多的客人。\n前言 搭建完博客之后，总是会觉得这不满意，然后在搭建过程中，用相同的建站工具和主题搜索，会发现网上有很多大佬已经搭建好的站点，就会这个功能也想要，那个功能也想要。在这里，我记录了一些我搭建过程中进行基础功能拓展和美化的过程。希望可以帮助到有缘人~\n以下教程为进阶版的简略教程，需要你有比较扎实的编程基础（或者不爱思考的脑袋），很多教程来自网上其他大佬，由于看了太多的教程，链接引用不全请见谅，如果有大佬看到了可以联系我加上。\n以下修改html和css的代码都不建议在themes文件夹直接修改，html可以在layout目录下新建同名文件（复制过来改），css可以在assets目录下新建，最终构建都会打包到public中并使用自定义的覆盖主题文件夹中的内容。\n好了，接下来就是博客裁缝的展示环节了。\n拓展功能 评论 Gisucs 选用Gisucs作为评论服务，最开始我的选择是Gisucs，但是后来我放弃了。Github作为存储虽然是全免费，非常优雅，但是要求评论者拥有一个Github账号对于用于体验实在是不太友好。\nGithub配置 参考链接： https://giscus.app/zh-CN#repository\n在某个Github公开仓库开启discussion功能（settings进入） 在Github安装Gisucs APP 记录生成的配置和代码，需要配置到自己的项目中 Hugo配置 参考链接： https://www.tofuwine.cn/posts/610b75f5/#pe-comments\n添加文件 layouts/partials/comments.html,输入以下内容 \u003cdiv class=\"comments-title\" id=\"tw-comment-title\"\u003e \u003cp class=\"x-comments-title\"\u003e{{- .Param \"giscus.discussionTitle\" }}\u003c/p\u003e \u003cp style=\"font-size: 1rem\"\u003e{{- .Param \"giscus.discussionSubtitle\" }} \u003c/p\u003e \u003c/div\u003e \u003cdiv id=\"tw-comment\"\u003e\u003c/div\u003e \u003cscript\u003e const getStoredTheme = () =\u003e localStorage.getItem(\"pref-theme\") === \"dark\" ? \"{{ .Site.Params.giscus.darkTheme }}\" : \"{{ .Site.Params.giscus.lightTheme }}\"; const setGiscusTheme = () =\u003e { const sendMessage = (message) =\u003e { const iframe = document.querySelector('iframe.giscus-frame'); if (iframe) { iframe.contentWindow.postMessage({giscus: message}, 'https://giscus.app'); } } sendMessage({setConfig: {theme: getStoredTheme()}}) } document.addEventListener(\"DOMContentLoaded\", () =\u003e { const giscusAttributes = { \"src\": \"https://giscus.app/client.js\", \"data-repo\": \"{{ .Site.Params.giscus.repo }}\", \"data-repo-id\": \"{{ .Site.Params.giscus.repoId }}\", \"data-category\": \"{{ .Site.Params.giscus.category }}\", \"data-category-id\": \"{{ .Site.Params.giscus.categoryId }}\", \"data-mapping\": \"{{ .Site.Params.giscus.mapping }}\", \"data-strict\": \"{{ .Site.Params.giscus.strict }}\", \"data-reactions-enabled\": \"{{ .Site.Params.giscus.reactionsEnabled}}\", \"data-emit-metadata\": \"{{ .Site.Params.giscus.emitMetadata }}\", \"data-input-position\": \"{{ .Site.Params.giscus.inputPosition }}\", \"data-theme\": getStoredTheme(), \"data-lang\": \"{{ .Site.Params.giscus.lang }}\", \"data-loading\": \"lazy\", \"crossorigin\": \"anonymous\", \"async\": \"\", }; // 动态创建 giscus script const giscusScript = document.createElement(\"script\"); Object.entries(giscusAttributes).forEach( ([key, value]) =\u003e giscusScript.setAttribute(key, value)); document.querySelector(\"#tw-comment\").appendChild(giscusScript); // 页面主题变更后，变更 giscus 主题 const themeSwitcher = document.querySelector(\"#theme-toggle\"); if (themeSwitcher) { themeSwitcher.addEventListener(\"click\", setGiscusTheme); } const themeFloatSwitcher = document.querySelector(\"#theme-toggle-float\"); if (themeFloatSwitcher) { themeFloatSwitcher.addEventListener(\"click\", setGiscusTheme); } }); \u003c/script\u003e 添加文件 assets/css/extended/comments.css,输入以下内容 /* giscus 评论组件 */ .comments-title { margin-top: 2rem; margin-bottom: 2rem; display: block; text-align: center; } .x-comments-title { display: block; font-size: 1.25em; font-weight: 700; padding: 1.5rem 0 .5rem; } 在 hugo.yaml 中添加内容，其中 {{}} 包裹的需要替换成自己的内容，内容在Gisucs会生成 giscus: repo: \"{{ REPO }}\" repoId: \"{ REPO_ID }\" category: \"Announcements\" categoryId: \"{{ CATEGORYID }}\" mapping: \"pathname\" strict: \"0\" reactionsEnabled: \"1\" emitMetadata: \"0\" inputPosition: \"bottom\" lightTheme: \"light\" darkTheme: \"dark\" lang: \"zh-CN\" discussionTitle: 欢迎来到评论区 discussionSubtitle: 感谢您的耐心阅读！如需交流，请留个评论吧！ 在 archetypes/default.md 中添加配置 comments: true 来开启评论区，已有的博客也需要修改这个来开启 Twikoo Twikoo 官网\n因为Gisucs要求评论者具有Github账号有点使用者不太友好，所以后面更换了一个Twikoo\nTwikoo的整体可以看作是一个CSS的架构，C-Hugo站点的静态JS代码，S-云函数，S-MonogoDB数据库。Twikoo的官方是懂我们这些穷鬼的，提供了很多免费部署的教程。我这边就按照官方推荐度最高的方法进行部署。MonogoDB选择MongoDB Atlas，有500MB的免费额度。Netlify部署云函数，每月 125,000 请求次数和 100 小时函数计算时长，看上去是完全够了。\nMongoDB Atlas 申请资源 MongoDB Atlas\n按照Twikoo官网指导，申请一个账号和500MB空间的MonogoDB数据库。\n注册MongoDB Atlas账号 无脑下一步，创建一个MonogoDB实例，这里创建数据库用户的时候密码记住，后面要用 修改Network Access为 0.0.0.0 允许所有IP访问 在connect中查看代码示例，选Node.js可以看到连接串，把数据库用户密码替换进去，把整个URL复制下来，等部署云函数的时候有用 Netlify 部署云函数 Netlify\n注册Netlify账号，注册的时候需要提供身份验证（有点恶心人了），密码需要设置得复杂一点，不然直接不给登录也不提示，我通过忘记密码改了一个很复杂的~~（时隔三天来校验博客的时候我已经忘记了，但是没关系，浏览器替我记住了）~~ Fork官方的仓到自己的Github，从仓库部署站点，环境变量中填入 MONGODB_URI 值为MonoDB Atlas中复制出来的URL 点xxx.netlify.app进入页面，看到云函数正常运行就是部署成功了 前端部署 需要把前端JS嵌入到Hugo的Html页面中，在 layout/comments.html 文件中添加代码 （如果有其他评论组件请自行删除）\n\u003cdiv id=\"tcomment\"\u003e\u003c/div\u003e \u003cscript src=\"https://cdn.jsdelivr.net/npm/twikoo@1.6.40/dist/twikoo.all.min.js\"\u003e\u003c/script\u003e \u003cscript\u003e twikoo.init({ envId: 'https://xxx.netlify.app/.netlify/functions/twikoo', el: '#tcomment', // 容器元素 }) \u003c/script\u003e 使用配置 进入管理员界面，首次进入配置密码 配置邮箱通知，Hotmail配置了无法测试通过，暂时没找到原因，后来配置了一个163的邮箱（需要填授权码，听说qq更方便一点，gmail没有尝试） 反垃圾配置，使用默认的反垃圾服务 akismet，支付一个0元账单就可以获得一个APPKey，填入配置里面就好 头像服务，默认的 weavatar，注册一个账号，上传一个自己喜欢的头像。但是这边遇到了一个比较奇怪的问题，同时输入昵称和邮箱，头像就会读取失败（但是后来发现生产上好像可以），所以我在通用设置里面把必填字段改成了只填邮箱，因为昵称填QQ号会自动生成qq邮箱。 侧面显示目录 参考资料： https://www.zhouxin.space/logs/introduce-side-toc-and-reading-percentage-to-papermod/\n创建文件 layouts/partials/toc.html 输入以下代码（代码全是抄的，别问我为什么这么写） {{- $headers := findRE \"\u003ch[1-6].*?\u003e(.|\\n])+?\u003c/h[1-6]\u003e\" .Content -}} {{- $has_headers := ge (len $headers) 1 -}} {{- if $has_headers -}} \u003caside id=\"toc-container\" class=\"toc-container wide\"\u003e \u003cdiv class=\"toc\"\u003e \u003cdetails {{if (.Param \"TocOpen\") }} open{{ end }}\u003e \u003csummary accesskey=\"c\" title=\"(Alt + C)\"\u003e \u003cspan class=\"details\"\u003e{{- i18n \"toc\" | default \"Table of Contents\" }}\u003c/span\u003e \u003c/summary\u003e \u003cdiv class=\"inner\"\u003e {{- $largest := 6 -}} {{- range $headers -}} {{- $headerLevel := index (findRE \"[1-6]\" . 1) 0 -}} {{- $headerLevel := len (seq $headerLevel) -}} {{- if lt $headerLevel $largest -}} {{- $largest = $headerLevel -}} {{- end -}} {{- end -}} {{- $firstHeaderLevel := len (seq (index (findRE \"[1-6]\" (index $headers 0) 1) 0)) -}} {{- $.Scratch.Set \"bareul\" slice -}} \u003cul\u003e {{- range seq (sub $firstHeaderLevel $largest) -}} \u003cul\u003e {{- $.Scratch.Add \"bareul\" (sub (add $largest .) 1) -}} {{- end -}} {{- range $i, $header := $headers -}} {{- $headerLevel := index (findRE \"[1-6]\" . 1) 0 -}} {{- $headerLevel := len (seq $headerLevel) -}} {{/* get id=\"xyz\" */}} {{- $id := index (findRE \"(id=\\\"(.*?)\\\")\" $header 9) 0 }} {{- /* strip id=\"\" to leave xyz, no way to get regex capturing groups in hugo */ -}} {{- $cleanedID := replace (replace $id \"id=\\\"\" \"\") \"\\\"\" \"\" }} {{- $header := replaceRE \"\u003ch[1-6].*?\u003e((.|\\n])+?)\u003c/h[1-6]\u003e\" \"$1\" $header -}} {{- if ne $i 0 -}} {{- $prevHeaderLevel := index (findRE \"[1-6]\" (index $headers (sub $i 1)) 1) 0 -}} {{- $prevHeaderLevel := len (seq $prevHeaderLevel) -}} {{- if gt $headerLevel $prevHeaderLevel -}} {{- range seq $prevHeaderLevel (sub $headerLevel 1) -}} \u003cul\u003e {{/* the first should not be recorded */}} {{- if ne $prevHeaderLevel . -}} {{- $.Scratch.Add \"bareul\" . -}} {{- end -}} {{- end -}} {{- else -}} \u003c/li\u003e {{- if lt $headerLevel $prevHeaderLevel -}} {{- range seq (sub $prevHeaderLevel 1) -1 $headerLevel -}} {{- if in ($.Scratch.Get \"bareul\") . -}} \u003c/ul\u003e {{/* manually do pop item */}} {{- $tmp := $.Scratch.Get \"bareul\" -}} {{- $.Scratch.Delete \"bareul\" -}} {{- $.Scratch.Set \"bareul\" slice}} {{- range seq (sub (len $tmp) 1) -}} {{- $.Scratch.Add \"bareul\" (index $tmp (sub . 1)) -}} {{- end -}} {{- else -}} \u003c/ul\u003e \u003c/li\u003e {{- end -}} {{- end -}} {{- end -}} {{- end }} \u003cli\u003e \u003ca href=\"#{{- $cleanedID -}}\" aria-label=\"{{- $header | plainify -}}\"\u003e{{- $header | safeHTML -}}\u003c/a\u003e {{- else }} \u003cli\u003e \u003ca href=\"#{{- $cleanedID -}}\" aria-label=\"{{- $header | plainify -}}\"\u003e{{- $header | safeHTML -}}\u003c/a\u003e {{- end -}} {{- end -}} {{- $firstHeaderLevel := $largest }} {{- $lastHeaderLevel := len (seq (index (findRE \"[1-6]\" (index $headers (sub (len $headers) 1)) 1) 0)) }} \u003c/li\u003e {{- range seq (sub $lastHeaderLevel $firstHeaderLevel) -}} {{- if in ($.Scratch.Get \"bareul\") (add . $firstHeaderLevel) }} \u003c/ul\u003e {{- else }} \u003c/ul\u003e \u003c/li\u003e {{- end -}} {{- end }} \u003c/ul\u003e \u003c/div\u003e \u003c/details\u003e \u003c/div\u003e \u003c/aside\u003e \u003cscript\u003e let activeElement; let elements; document.addEventListener('DOMContentLoaded', function (event) { checkTocPosition(); elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]'); if (elements.length \u003e 0) { // Make the first header active activeElement = elements[0]; const id = encodeURI(activeElement.getAttribute('id')).toLowerCase(); document.querySelector(`.inner ul li a[href=\"#${id}\"]`).classList.add('active'); } // Add event listener for the \"back to top\" link const topLink = document.getElementById('top-link'); if (topLink) { topLink.addEventListener('click', (event) =\u003e { // Prevent the default action event.preventDefault(); // Smooth scroll to the top window.scrollTo({ top: 0, behavior: 'smooth' }); }); } }, false); window.addEventListener('resize', function(event) { checkTocPosition(); }, false); window.addEventListener('scroll', () =\u003e { // Get the current scroll position const scrollPosition = window.pageYOffset || document.documentElement.scrollTop; // Check if the scroll position is at the top of the page if (scrollPosition === 0) { return; } // Ensure elements is a valid NodeList if (elements \u0026\u0026 elements.length \u003e 0) { // Check if there is an object in the top half of the screen or keep the last item active activeElement = Array.from(elements).find((element) =\u003e { if ((getOffsetTop(element) - scrollPosition) \u003e 0 \u0026\u0026 (getOffsetTop(element) - scrollPosition) \u003c window.innerHeight / 2) { return element; } }) || activeElement; elements.forEach(element =\u003e { const id = encodeURI(element.getAttribute('id')).toLowerCase(); const tocLink = document.querySelector(`.inner ul li a[href=\"#${id}\"]`); if (element === activeElement){ tocLink.classList.add('active'); // Ensure the active element is in view within the .inner container const tocContainer = document.querySelector('.toc .inner'); const linkOffsetTop = tocLink.offsetTop; const containerHeight = tocContainer.clientHeight; const linkHeight = tocLink.clientHeight; // Calculate the scroll position to center the active link const scrollPosition = linkOffsetTop - (containerHeight / 2) + (linkHeight / 2); tocContainer.scrollTo({ top: scrollPosition, behavior: 'smooth' }); } else { tocLink.classList.remove('active'); } }); } }, false); const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10); const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10); const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10); function checkTocPosition() { const width = document.body.scrollWidth; if (width - main - (toc * 2) - (gap * 4) \u003e 0) { document.getElementById(\"toc-container\").classList.add(\"wide\"); } else { document.getElementById(\"toc-container\").classList.remove(\"wide\"); } } function getOffsetTop(element) { if (!element.getClientRects().length) { return 0; } let rect = element.getBoundingClientRect(); let win = element.ownerDocument.defaultView; return rect.top + win.pageYOffset; } \u003c/script\u003e {{- end }} 创建 assets/css/extended/toc.css 文件，并输入以下内容（也是抄的，感谢大佬，赞美大佬） :root { --nav-width: 1380px; --article-width: 650px; --toc-width: 300px; } .toc { margin: 0 2px 40px 2px; border: 1px solid var(--border); background: var(--entry); border-radius: var(--radius); padding: 0.4em; } .toc-container.wide { position: absolute; height: 100%; border-right: 1px solid var(--border); left: calc((var(--toc-width) + var(--gap)) * -1); top: calc(var(--gap) * 2); width: var(--toc-width); } .wide .toc { position: sticky; top: var(--gap); border: unset; background: unset; border-radius: unset; width: 100%; margin: 0 2px 40px 2px; } .toc details summary { cursor: zoom-in; margin-inline-start: 20px; padding: 12px 0; } .toc details[open] summary { font-weight: 500; } .toc-container.wide .toc .inner { margin: 0; } .active { font-size: 110%; font-weight: 600; } .toc ul { list-style-type: circle; } .toc .inner { margin: 0 0 0 20px; padding: 0px 15px 15px 20px; font-size: 16px; /*目录显示高度*/ max-height: 83vh; overflow-y: auto; } .toc .inner::-webkit-scrollbar-thumb { /*滚动条*/ background: var(--border); border: 7px solid var(--theme); border-radius: var(--radius); } .toc li ul { margin-inline-start: calc(var(--gap) * 0.5); list-style-type: none; } .toc li { list-style: none; font-size: 0.95rem; padding-bottom: 5px; } .toc li a:hover { color: var(--secondary); } 同时在archetypes\\default.yml中添加参数 showToc: true # 显示目录 TocOpen: true # 打开目录 PV/UV 不蒜子Busuanzi 使用不蒜子Busuanzi进行站点访问统计。 参考链接： https://blog.kanikig.xyz/hugo-busuanzi/\n添加文件 layouts\\parials\\head.html 从主题文件夹 themes\\layouts\\parials\\head.html 中拷贝内容并修改，在Styles上方添加一个if块 ... {{- if site.Params.analytics.naver.SiteVerificationTag }} \u003cmeta name=\"naver-site-verification\" content=\"{{ site.Params.analytics.naver.SiteVerificationTag }}\"\u003e {{- end }} {{- if .Site.Params.busuanzi.enable -}} \u003cscript async src=\"//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js\"\u003e\u003c/script\u003e \u003cmeta name=\"referrer\" content=\"no-referrer-when-downgrade\"\u003e {{- end -}} {{- /* Styles */}} ... 添加文件 layouts\\parials\\footer.html 从主题文件夹 themes\\layouts\\parials\\footer.html 中拷贝内容并修改，在footer标签内添加一个if块 ... {{- if not (.Param \"hideFooter\") }} \u003cfooter class=\"footer\"\u003e {{- if not site.Params.footer.hideCopyright }} {{- if site.Copyright }} \u003cspan\u003e{{ site.Copyright | markdownify }}\u003c/span\u003e {{- else }} \u003cspan\u003e\u0026copy; {{ now.Year }} \u003ca href=\"{{ \"\" | absLangURL }}\"\u003e{{ site.Title }}\u003c/a\u003e\u003c/span\u003e {{- end }} {{- print \" · \"}} {{- end }} {{- with site.Params.footer.text }} {{ . | markdownify }} {{- print \" · \"}} {{- end }} {{ if .Site.Params.busuanzi.enable -}} \u003cdiv class=\"busuanzi-footer\"\u003e \u003cspan id=\"busuanzi_container_site_pv\"\u003e 本站总访问量\u003cspan id=\"busuanzi_value_site_pv\"\u003e\u003c/span\u003e次 \u003c/span\u003e \u003cspan id=\"busuanzi_container_site_uv\"\u003e 本站访客数\u003cspan id=\"busuanzi_value_site_uv\"\u003e\u003c/span\u003e人次 \u003c/span\u003e \u003c/div\u003e {{- end -}} \u003cspan\u003e Powered by \u003ca href=\"https://gohugo.io/\" rel=\"noopener noreferrer\" target=\"_blank\"\u003eHugo\u003c/a\u003e \u0026 \u003ca href=\"https://github.com/adityatelange/hugo-PaperMod/\" rel=\"noopener\" target=\"_blank\"\u003ePaperMod\u003c/a\u003e \u003c/span\u003e \u003c/footer\u003e ... {{- end }} 添加文件 layouts\\_defaults\\single.html 从主题文件夹 themes\\layouts\\_defaults\\single.html 中拷贝内容并修改，在post-meta内添加一个if块 ... \u003cdiv class=\"post-meta\"\u003e {{- partial \"post_meta.html\" . -}} {{- partial \"translation_list.html\" . -}} {{- partial \"edit_post.html\" . -}} {{- partial \"post_canonical.html\" . -}} {{ if .Site.Params.busuanzi.enable -}} \u003cdiv class=\"meta-item\"\u003e\u0026nbsp·\u0026nbsp \u003cspan id=\"busuanzi_container_page_pv\"\u003e本文阅读量\u003cspan id=\"busuanzi_value_page_pv\"\u003e\u003c/span\u003e次\u003c/span\u003e \u003c/div\u003e {{- end }} \u003c/div\u003e ... 在hugo.html文件中的param节点中添加开关 params: busuanzi: enable: true Google Analyze 只需要在 hugo.yaml 中添加以下代码即可，id更换为自己在Google Analytic中申请的跟踪ID\nservices: googleAnalytics: id: \"G-XXXXXXXXXX\" 时间线 添加一个根据时间线排列的归档页面，写的多写的久才有质感。多写写吧！\n添加 content\\archive.md 文件，输入以下内容 --- title: \"\" layout: \"archives\" url: \"/archives/\" summary: archives --- 在 hugo.html 中添加按钮，在 menu.main 节点下新增以下内容 - identifier: archive name: 时间轴 url: /archives/ weight: 11 留言板 利用评论系统，新增一个Layout来构建一个留言板页面。\n创建 layouts\\message.html 文件输入一下代码（代码从 single.html 中删除了很多东西，简化得到，顺便做了一下标题居中，这回是自己写的了）： {{- define \"main\" }} \u003carticle class=\"post-single\"\u003e \u003cheader class=\"post-header\"\u003e \u003ch1 class=\"post-title entry-hint-parent\"\u003e \u003cdiv style=\"margin-left: auto;margin-right: auto;\"\u003e {{ .Title }} \u003c/div\u003e \u003c/h1\u003e \u003c/header\u003e {{- if .Content }} \u003cdiv class=\"post-content\"\u003e {{ .Content }} \u003c/div\u003e {{- end }} \u003cfooter class=\"post-footer\"\u003e \u003cdiv id=\"tcomment\"\u003e\u003c/div\u003e \u003cscript src=\"https://cdn.jsdelivr.net/npm/twikoo@1.6.40/dist/twikoo.all.min.js\"\u003e\u003c/script\u003e \u003cscript\u003e twikoo.init({ envId: 'xxx', el: '#tcomment', }) \u003c/script\u003e \u003c/footer\u003e \u003c/article\u003e {{- end }} 在命令行中创建一个新的md文件(不要直接新建文件，我试了，编译的时候不会生成文件，会导致404)，输入 hugo new message.md，并在其中输入以下代码 --- title: \"💬 留言板\" date: '2024-12-13T21:14:22+08:00' draft: false # 默认为草稿模式 layout: \"message\" comments: true # 评论 --- 在 hugo.yaml 中新增首页目录，添加以下代码 - identifier: message name: 💬 留言板 url: /message/ weight: 21 添加最近修改时间 复制主题中的 post_meta.html 到 layout/post_meta.html 新增最近修改时间的内容，并修改发布时间的内容和国际化，\n在 layout/post_meta.html 输入以下代码 {{- $scratch := newScratch }} {{- if not .Date.IsZero -}} {{- $dateStr := .Date.Format (default \"January 2, 2006\" site.Params.DateFormat) -}} {{- $translatedPublished := i18n \"published\" -}} {{- $dateHTML := printf \"\u003cspan title='%s'\u003e%s\u003c/span\u003e\" (.Date) $dateStr -}} {{- $scratch.Add \"meta\" (slice (printf \"%s %s\" $translatedPublished $dateHTML)) }} {{- end }} {{- if not .Lastmod.IsZero -}} {{- $lastmodStr := .Lastmod.Format (default \"January 2, 2006\" site.Params.DateFormat) -}} {{- $translatedLastModified := i18n \"last_modified\" -}} {{- $lastmodHTML := printf \"\u003cspan title='%s'\u003e%s\u003c/span\u003e\" (.Lastmod) $lastmodStr -}} {{- $scratch.Add \"meta\" (slice (printf \"%s %s\" $translatedLastModified $lastmodHTML)) }} {{- end }} {{- if (.Param \"ShowReadingTime\") -}} {{- $scratch.Add \"meta\" (slice (i18n \"read_time\" .ReadingTime | default (printf \"%d min\" .ReadingTime))) }} {{- end }} {{- if (.Param \"ShowWordCount\") -}} {{- $scratch.Add \"meta\" (slice (i18n \"words\" .WordCount | default (printf \"%d words\" .WordCount))) }} {{- end }} {{- if not (.Param \"hideAuthor\") -}} {{- with (partial \"author.html\" .) }} {{- $scratch.Add \"meta\" (slice .) }} {{- end }} {{- end }} {{- with ($scratch.Get \"meta\") }} {{- delimit . \"\u0026nbsp;·\u0026nbsp;\" | safeHTML -}} {{- end -}} 在i18n文件夹的对应目录添加翻译 在 hugo.yaml 中新增配置 frontmatte.lastmod: ['lastmod', ':git', 'date', 'publishDate'] 用于指定lastmod变量的赋值顺序 自定义域名 首先需要有一个域名，在对应的域名服务商添加一条解析记录，解析类型：CNAME，解析值为 xxx.github.io (xxx替换为自己的Github用户名)\n再添加文件 static\\CNAME ,文件的内容为自定义的域名。没有这个文件，访问域名会出现404。\n友链 参考： https://aimerneige.com/zh/post/web/add-friend-link-in-papermod-blog/\n这个是没有脑子直接抄的\n创建一个文件 layouts/partials/friends.html 输入以下代码 \u003cstyle type=\"text/css\"\u003e .friends { --link-count-per-row: 1; } @media screen and (min-width: 576px) { .friends { --link-count-per-row: 2; } } @media screen and (min-width: 768px) { .friends { --link-count-per-row: 3; } } .friends { display: grid; grid-template-columns: repeat(var(--link-count-per-row), 1fr); grid-gap: 16px; } /* 空间占位 */ .friend-skeleton { height: 280px; display: inline-block; position: relative; } .friend { height: 100%; width: 100%; position: absolute; top: 0; left: 0; transition: 0.67s cubic-bezier(0.19, 1, 0.22, 1); border-radius: var(--radius); box-shadow: 0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12) !important; overflow: hidden; display: flex; flex-direction: column; justify-content: flex-start; align-items: center; } .friend:hover { transform: translateY(-8px); box-shadow: 0 3px 5px -1px rgba(0, 0, 0, 0.2), 0 5px 8px 0 rgba(0, 0, 0, 0.14), 0 1px 14px 0 rgba(0, 0, 0, 0.12) !important; } .friend-avatar { object-fit: cover; width: 100%; height: 180px; margin: 0 !important; border-radius: 0 !important; } .friend-content { text-align: center; flex: 1; width: 100%; padding: 16px; background: var(--entry); transform: translate3d(0, 0, 0); } .friend-name { font-size: 1.2rem; font-weight: bold; transform: inherit; } .friend-description { font-size: 0.8rem; color: var(--secondary); transform: translate3d(0, 0, 0); } \u003c/style\u003e \u003cdiv class=\"friends\"\u003e {{ range .Site.Data.friends }} \u003cdiv class=\"friend-skeleton\"\u003e \u003ca href=\"{{ .link }}\" target=\"_blank\"\u003e \u003cdiv class=\"friend\"\u003e \u003cimg class=\"friend-avatar\" src=\"{{ .image }}\" /\u003e \u003cdiv class=\"friend-content\"\u003e \u003cdiv class=\"friend-name\"\u003e{{ .title }}\u003c/div\u003e \u003cdiv class=\"friend-description\"\u003e{{ .intro }}\u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/a\u003e \u003c/div\u003e {{ end }} \u003c/div\u003e 创建 default/friends.html 文件，输入一下代码，用于创建新的界面 {{- define \"main\" }} \u003carticle class=\"post-single\"\u003e \u003cheader class=\"post-header\"\u003e {{ partial \"breadcrumbs.html\" . }} \u003ch1 class=\"post-title entry-hint-parent\"\u003e {{ .Title }} \u003c/h1\u003e \u003c/header\u003e {{- $isHidden := (.Param \"cover.hiddenInSingle\") | default (.Param \"cover.hidden\") | default false }} {{- partial \"cover.html\" (dict \"cxt\" . \"IsSingle\" true \"isHidden\" $isHidden) }} {{- if (.Param \"ShowToc\") }} {{- partial \"toc.html\" . }} {{- end }} \u003cdiv style=\"height: 40px;\"\u003e\u003c/div\u003e {{ .Content }} \u003cdiv style=\"height: 40px;\"\u003e\u003c/div\u003e {{ partial \"friends.html\" . }} \u003cdiv style=\"height: 40px;\"\u003e\u003c/div\u003e {{- if (.Param \"comments\") }} {{- partial \"comments.html\" . }} {{- end }} \u003c/article\u003e {{- end }}{{/* end main */}} 创建 posts/friends 文件，输入以下内容 --- title: \"🧑‍🤝‍🧑 Zanks的朋友们 🧑‍🤝‍🧑\" date: '2024-01-01T00:00:00+08:00' author: \"Zanks\" layout: \"friends\" comments: true # 评论 --- 排名不分先后，按时间顺序添加。如需新增请留言，或通过其他方式联系我。 创建 data/friends.yml 文件，用于存储友链的数据，以下仅为示范 - title: \"伞\" intro: \"一只咸鱼的学习记录\" link: \"https://umb.ink/\" image: \"https://avatars.githubusercontent.com/u/53655863?v=4\" - title: \"HelloWorld的小博客\" intro: \"这里是一个小白的博客\" link: \"https://mzdluo123.github.io/\" image: \"https://avatars.githubusercontent.com/u/23146087?v=4\" 全站文章和字数统计 参考：https://huuuuuuo-github-io.vercel.app/post/hugo%E6%80%BB%E5%AD%97%E6%95%B0%E7%BB%9F%E8%AE%A1/\n可以将以下代码加入到任何喜欢的页面，我放在了About页面\n{{$scratch := newScratch}} {{ range (where .Site.RegularPages \"Section\" \"posts\" )}} {{$scratch.Add \"total\" .WordCount}} {{ end }} \u003cdiv\u003e \u003cdiv\u003e 📚 文章数: \u003c/div\u003e \u003cdiv\u003e {{ len (where .Site.RegularPages \"Section\" \"posts\") }} \u003c/div\u003e \u003c/div\u003e \u003cdiv\u003e \u003cdiv\u003e ✍️ 总字数: \u003c/div\u003e \u003cdiv\u003e {{ div ($scratch.Get \"total\") 1000.0 | lang.FormatNumber 2 }}K \u003c/div\u003e \u003c/div\u003e 右侧边栏 底部悬浮按钮 参考了一个个性化的PaperMod主题 https://github.com/tofuwine/PaperMod-PE 实现的效果是在页面的右侧添加了一个前往评论区的按钮，重写了官方回到顶部的按钮（添加了阅读进度）\n在 static\\js 目录下引入两个文件分别用于实现按钮的动态样式，实现逻辑来自PaperMod-PE源码。 // go-comment.js document.addEventListener('scroll', function () { const comment = document.getElementById(\"comments-title\"); const bottomToComment = document.getElementById(\"comments-link\") const viewPortHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight const offsetTop = comment.offsetTop const scrollTop = document.documentElement.scrollTop const top = offsetTop - scrollTop if (top \u003c= viewPortHeight + 100) { bottomToComment.style.visibility = \"hidden\"; bottomToComment.style.opacity = \"0\"; } else { bottomToComment.style.visibility = \"visible\"; bottomToComment.style.opacity = \"1\"; } }) // go-top.js let menu = document.getElementById('menu') if (menu) { menu.scrollLeft = Number(localStorage.getItem(\"menu-scroll-position\")); menu.onscroll = function () { localStorage.setItem(\"menu-scroll-position\", menu.scrollLeft.toString()); } } window.onscroll = function () { const goTopButton = document.getElementById(\"top-link\"); if (document.body.scrollTop \u003e 800 || document.documentElement.scrollTop \u003e 800) { goTopButton.style.visibility = \"visible\"; goTopButton.style.opacity = \"1\"; } else { goTopButton.style.visibility = \"hidden\"; goTopButton.style.opacity = \"0\"; } }; document.addEventListener('scroll', function (e) { const readProgress = document.getElementById(\"pe-read-progress\"); const scrollHeight = document.documentElement.scrollHeight; const clientHeight = document.documentElement.clientHeight; const scrollTop = document.documentElement.scrollTop || document.body.scrollTop; readProgress.innerText = ((scrollTop / (scrollHeight - clientHeight)).toFixed(2) * 100).toFixed(0); }) 删除原有回到顶部的按钮，或通过配置disableScrollToTop关闭（代码位于 footer.html） 添加 right_aside.html 文件添加右侧边栏的代码 \u003caside\u003e \u003cdiv class=\"right-side-btns\"\u003e {{- /* Scroll To Comment */ -}} \u003cscript src=\"/js/go-comment.js\"\u003e\u003c/script\u003e \u003ca href=\"#comments-title\" class=\"right-side-btn\" id=\"comments-link\" style=\"visibility: visible; opacity: 1;padding: 0.6rem;\"\u003e \u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 29.338 29.338\" fill=\"currentColor\"\u003e \u003cpath d=\"M27.184,1.605H2.156C0.967,1.605,0,2.572,0,3.76v17.572c0,1.188,0.967,2.155,2.156,2.155h13.543 l5.057,3.777c0.414,0.31,0.842,0.468,1.268,0.468c0.789,0,1.639-0.602,1.637-1.923v-2.322h3.523c1.188,0,2.154-0.967,2.154-2.155 V3.76C29.338,2.572,28.371,1.605,27.184,1.605z M27.34,21.332c0,0.085-0.068,0.155-0.154,0.155h-5.523v3.955l-5.297-3.956H2.156 c-0.086,0-0.154-0.07-0.154-0.155V3.759c0-0.085,0.068-0.155,0.154-0.155v0.001h25.029c0.086,0,0.154,0.07,0.154,0.155 L27.34,21.332L27.34,21.332z M5.505,10.792h4.334v4.333H5.505C5.505,15.125,5.505,10.792,5.505,10.792z M12.505,10.792h4.334v4.333 h-4.334V10.792z M19.505,10.792h4.334v4.333h-4.334V10.792z\" /\u003e \u003c/svg\u003e \u003c/a\u003e \u003cscript src=\"/js/go-top.js\"\u003e\u003c/script\u003e \u003ca href=\"#top\" class=\"right-side-btn\" id=\"top-link\" style=\"text-align: center;\"\u003e \u003cspan id=\"pe-read-progress\"\u003e\u003c/span\u003e \u003c/a\u003e \u003c/div\u003e \u003c/aside\u003e 添加CSS asset\\css\\extended\\right_side.css 实现样式 :root { --text-color: #bdbdbd; --text-hover-color: #373737ac; --right-side-width: 300px; } .dark { --text-color: #bdbdbd; --text-hover-color: #373737ac; } .right-side-btns, .right-side-btn { display: flex; flex-direction: column; align-items: center; justify-content: center; } .right-side-btns { position: fixed; right: 1rem; z-index: 999; bottom: 2rem; gap: 1rem; } .right-side-btn { width: 2.4rem; height: 2.4rem; padding: 0.3rem; border-radius: 50%; background: var(--tertiary); color: var(--secondary); transition: all 0.3s ease; font-size: 0.9rem; } .right-side-btn:hover { background-color: var(--text-color); color: var(--text-hover-color); outline: 0; } 作者信息栏 此部分代码在网上没找到样例可以抄，大部分都是靠着本人一边GPT一边理解自己实现的。 实现了一个可以悬浮在右侧边栏的框，展示头像、社交信息和最近更新的文章。\n添加一个在 right-side.html 中的节点下添加以下代码 \u003cdiv class=\"author-info\"\u003e \u003cimg src=\"/homepage.jpg\" class=\"author-avatar\" /\u003e \u003cdiv\u003e \u003cdiv class=\"social-icons\"\u003e {{- range site.Params.socialIcons }} \u003ca href=\"{{ trim .url \" \" | safeURL }}\" target=\"_blank\" rel=\"noopener noreferrer me\" title=\"{{ (.title | default .name) | title }}\"\u003e {{ partial \"svg.html\" . }} \u003c/a\u003e {{- end }} \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"last-mod\"\u003e \u003cdiv\u003e \u003cdiv class=\"custom-divider\"\u003e\u003c/div\u003e \u003cdiv class=\"last-mod-title\"\u003e最近更新\u003c/div\u003e \u003cdiv class=\"custom-divider\"\u003e\u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"last-mod-table\"\u003e {{ range first 3 (where .Site.RegularPages \"Section\" \"posts\").ByDate.Reverse }} \u003ca class=\"last-mod-item\" href=\"{{ .RelPermalink }}\"\u003e \u003cdiv class=\"last-mod-item-tile\"\u003e{{ .Title }} \u003c/div\u003e \u003cdiv class=\"last-mod-item-time\"\u003e ----- 于 {{.Lastmod.Format (default \"January 2, 2006\" site.Params.DateFormat)}} 由 {{ .Params.author }} 更新\u003c/div\u003e \u003c/a\u003e {{ end }} \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e 在asset\\css\\extended\\right_side.css 添加样式 .right-side { position: absolute; height: 100%; width: 25%; border-left: 1px solid var(--border); right: calc((var(--right-side-width) + var(--gap)) * -1); top: calc(var(--gap) * 2); width: var(--right-side-width); } .author-info { display: flex; flex-direction: column; /* 设置主轴方向为纵向 */ justify-content: center; /* 在主轴上居中对齐 */ align-items: center; /* 在交叉轴上居中对齐 */ margin-top: 0px; margin-left: 25px; margin-right: 10px; position: sticky; top: var(--gap); border: 2px solid var(--text-hover-color); /* 边框宽度为2px，样式为实线，颜色为黑色 */ box-shadow: 0 2px 4px var(--text-hover-color); /* 水平偏移0px，垂直偏移4px，模糊半径8px，颜色为黑色且透明度为0.1 */ } .author-avatar { height: 128px; width: 128px; margin-top: 20px; border-radius: 50%; } .last-mod { width: 90%; margin-top: 10px; } .last-mod-table { display: flex; flex-direction: column; align-items: center; justify-content: center; margin-top: 5px; } .last-mod-title { text-align: center; font-weight: bold; } .last-mod-item { width: 100%; display: 1; font-size: 0.9rem; border: 2px solid var(--text-hover-color); border-radius: 10px; padding: 4px; padding-left: 7px; padding-right: 7px; margin-bottom: 10px ; transition: transform 0.5s ease; } .last-mod-item:hover { border: 2px solid var(--text-color); } .last-mod-item-time { font-size: 0.7rem; text-align: right; } .custom-divider { width: 100%; height: 1px; background: repeating-linear-gradient( to right, #e0e0e0, #e0e0e0 33%, transparent 0, transparent 67%, #e0e0e0 0, #e0e0e0 100% ); } 界面显示优化 配置默认语言为中文 在 hugo.html 文件中添加配置 defaultContentLanguage: zh 可以汉化大部分主题的内容\n日期格式显示优化 在 hugo.html 文件中的Param节点下添加配置 DateFormat: \"2006-01-02\" (go的时间配置必须要用这个日期，yyyy-MM-dd不行)\n标签页添加词云 参考资料： https://blog.xlap.top/post/tech/wordcloud4hugo/#%E9%A1%B9%E7%9B%AE%E5%9C%B0%E5%9D%80 感谢开源作者和大佬代码，我直接抄了\n下载 wordcloud2.js 拷贝到 static/js/ 目录下，下载地址 修改 head.html 引入js文件，新增以下代码： {{- if eq .Section \"tags\"}} {{/* 标签云 */}} \u003clink rel=\"stylesheet\" href=\"/css/word-cloud.css\"\\\u003e \u003cscript src=\"/js/wordcloud2.js\"\u003e\u003c/script\u003e {{- end }} 创建 staic/css/word-cloud.css 文件输入以下代码： .word-color:nth-child(7n + 1) { color: rgb(202, 110, 255); } .word-color:nth-child(7n + 2) { color: rgb(83, 110, 255); } .word-color:nth-child(7n + 3) { color: rgb(143, 253, 241); } .word-color:nth-child(7n + 4) { color: rgb(183, 255, 112); } .word-color:nth-child(7n + 5) { color: rgb(255, 212, 126); } .word-color:nth-child(7n + 6) { color: rgb(248, 140, 131); } .word-color:nth-child(7n + 7) { color: rgb(104, 160, 255); } @keyframes word { 0% { opacity: 0.5; } 3% { opacity: 1; } 9% { opacity: 1; } 12% { opacity: 0.5; } 100% { opacity: 0.5; } } .word-animate { animation-name: word; animation-duration: 20s; animation-iteration-count: infinite; will-change: opacity; opacity: 0.5; } .word-animate:nth-child(7n + 1) { animation-delay: 0s; } .word-animate:nth-child(7n + 2) { animation-delay: 3s; } .word-animate:nth-child(7n + 3) { animation-delay: 6s; } .word-animate:nth-child(7n + 4) { animation-delay: 9s; } .word-animate:nth-child(7n + 5) { animation-delay: 12s; } .word-animate:nth-child(7n + 6) { animation-delay: 15s; } .word-animate:nth-child(7n + 7) { animation-delay: 18s; } 创建 layouts/_default/terms.html 输入以下代码 {{- define \"main\" }} {{- if .Title }} \u003cheader class=\"page-header\"\u003e \u003ch1\u003e{{ .Title }}\u003c/h1\u003e {{- if .Description }} \u003cdiv class=\"post-description\"\u003e {{ .Description }} \u003c/div\u003e {{- end }} \u003c/header\u003e {{- end }} \u003cul class=\"terms-tags\"\u003e \u003cdiv id=\"sourrounding_div\" style=\"width:100%;height:100%;min-height: 500px;\"\u003e \u003cdiv id=\"tag-canvas\"\u003e\u003c/div\u003e \u003c/div\u003e \u003cscript src=\"/js/wordcloud2.js\"\u003e\u003c/script\u003e {{- range $key, $value := .Data.Terms.Alphabetical }} {{ if eq \"\" ($.Scratch.Get \"tagsMap\") }} {{ $.Scratch.Set \"tagsMap\" (slice (dict .Name .Count)) }} {{ else }} {{ $.Scratch.Add \"tagsMap\" (slice (dict .Name .Count)) }} {{ end }} {{- end }} {{ $result := ($.Scratch.Get \"tagsMap\")}} \u003cspan id=\"tag-temp\" style=\"display:none\"\u003e{{$result | jsonify }}\u003c/span\u003e \u003cscript\u003e //因为前期每个标签值比较小，帮X一个系数 var XISHU = 20; //为了动态宽度 var div = document.querySelector(\"#sourrounding_div\"); var canvas = document.querySelector(\"#tag-canvas\"); canvas.style.width = div.offsetWidth + 'px'; canvas.style.height = div.offsetHeight + 'px'; var wordFreqData = document.querySelector(\"#tag-temp\").innerHTML; var jsonObj = JSON.parse(wordFreqData); var arr = [] jsonObj.forEach(element =\u003e { var key = Object.keys(element); var itemArr = [key[0], element[key] * XISHU]; arr.push(itemArr); }); //获取当前是暗色还是浅色 var isDark = document.body.className.includes(\"dark\"); WordCloud(canvas, { \"list\": arr,//或者[['各位观众',45],['词云', 21],['来啦!!!',13]],只要格式满足这样都可以 \"shape\": \"cardioid\", //形状 circle (default), cardioid (心型), diamond, square, triangle-forward, triangle, pentagon, and star. \"gridSize\": 20, // 密集程度 数字越小越密集 \"weightFactor\": 1, // 字体大小=原始大小*weightFactor \"fontWeight\": 'normal', //字体粗细 \"fontFamily\": 'Times, serif', // 字体 \"color\": isDark ? 'random-light' : 'random-dark', // 字体颜色 'random-dark' 或者 'random-light' \"backgroundColor\": 'none', // 背景颜色 \"classes\": \"tag-cloud-item word-color\", //用于点击事件 }); canvas.addEventListener('wordcloudstop', function (e) { //动画 setTimeout(() =\u003e { var els = document.querySelectorAll(\".word-color\"); Array.from(els).forEach((el) =\u003e { console.log('动画', el) el.classList.add(\"word-animate\") }) }, 2000); //点击 document.querySelectorAll('.tag-cloud-item').forEach(function (element) { const text = element.innerHTML; element.innerHTML = `",
  "wordCount" : "3491",
  "inLanguage": "zh",
  "datePublished": "2024-01-01T02:00:00+08:00",
  "dateModified": "2024-12-30T15:50:21+08:00",
  "author":{
    "@type": "Person",
    "name": "Zanks"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.zanks.link/2024/01/01/hugo-2/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "乱话三千",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.zanks.link/assets/favicon.ico"
    }
  }
}
</script>

</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://www.zanks.link/" accesskey="h" title="乱话三千 (Alt + H)">乱话三千</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://www.zanks.link/search/" title="🔍 搜索 (Alt &#43; /)" accesskey=/>
                    <span>🔍 搜索</span>
                </a>
            </li>
            <li>
                <a href="https://www.zanks.link/recipe/" title="🍳 食谱">
                    <span>🍳 食谱</span>
                </a>
            </li>
            <li>
                <a href="https://www.zanks.link/posts/" title="📖 文章">
                    <span>📖 文章</span>
                </a>
            </li>
            <li>
                <a href="https://www.zanks.link/archives/" title="⌛ 时间轴">
                    <span>⌛ 时间轴</span>
                </a>
            </li>
            <li>
                <a href="https://www.zanks.link/tags/" title="🏷️ 标签">
                    <span>🏷️ 标签</span>
                </a>
            </li>
            <li>
                <a href="https://www.zanks.link/friends/" title="🧑‍🤝‍🧑 友链">
                    <span>🧑‍🤝‍🧑 友链</span>
                </a>
            </li>
            <li>
                <a href="https://www.zanks.link/message/" title="💬 留言板">
                    <span>💬 留言板</span>
                </a>
            </li>
            <li>
                <a href="https://www.zanks.link/about/" title="😾 关于">
                    <span>😾 关于</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://www.zanks.link/">主页</a>&nbsp;»&nbsp;<a href="https://www.zanks.link/posts/">📖 文章</a></div>
    <h1 class="post-title entry-hint-parent" style="margin-top: 10px;">
      【Hugo】进阶篇：PaperMod主题美化
    </h1>
    <div class="post-meta" style="margin-top: 20px;">发布于: <no value> <span title='2024-01-01 02:00:00 +0800 +0800'>2024-01-01</span>&nbsp;·&nbsp;最后修改于: <no value> <span title='2024-12-30 15:50:21 +0800 +0800'>2024-12-30</span>&nbsp;·&nbsp;17 分钟&nbsp;·&nbsp;3491 字&nbsp;·&nbsp;Zanks

</div>

    
  </header> <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">目录</span>
            </summary>

            <div class="inner"><ul>
                    <li>
                        <a href="#%e5%89%8d%e8%a8%80" aria-label="前言">前言</a></li>
                    <li>
                        <a href="#%e6%8b%93%e5%b1%95%e5%8a%9f%e8%83%bd" aria-label="拓展功能">拓展功能</a><ul>
                            
                    <li>
                        <a href="#%e8%af%84%e8%ae%ba" aria-label="评论">评论</a><ul>
                            
                    <li>
                        <a href="#gisucs" aria-label="Gisucs">Gisucs</a><ul>
                            
                    <li>
                        <a href="#github%e9%85%8d%e7%bd%ae" aria-label="Github配置">Github配置</a></li>
                    <li>
                        <a href="#hugo%e9%85%8d%e7%bd%ae" aria-label="Hugo配置">Hugo配置</a></li></ul>
                    </li>
                    <li>
                        <a href="#twikoo" aria-label="Twikoo">Twikoo</a><ul>
                            
                    <li>
                        <a href="#mongodb-atlas-%e7%94%b3%e8%af%b7%e8%b5%84%e6%ba%90" aria-label="MongoDB Atlas 申请资源">MongoDB Atlas 申请资源</a></li>
                    <li>
                        <a href="#netlify-%e9%83%a8%e7%bd%b2%e4%ba%91%e5%87%bd%e6%95%b0" aria-label="Netlify 部署云函数">Netlify 部署云函数</a></li>
                    <li>
                        <a href="#%e5%89%8d%e7%ab%af%e9%83%a8%e7%bd%b2" aria-label="前端部署">前端部署</a></li>
                    <li>
                        <a href="#%e4%bd%bf%e7%94%a8%e9%85%8d%e7%bd%ae" aria-label="使用配置">使用配置</a></li></ul>
                    </li></ul>
                    </li>
                    <li>
                        <a href="#%e4%be%a7%e9%9d%a2%e6%98%be%e7%a4%ba%e7%9b%ae%e5%bd%95" aria-label="侧面显示目录">侧面显示目录</a></li>
                    <li>
                        <a href="#pvuv" aria-label="PV/UV">PV/UV</a><ul>
                            
                    <li>
                        <a href="#%e4%b8%8d%e8%92%9c%e5%ad%90busuanzi" aria-label="不蒜子Busuanzi">不蒜子Busuanzi</a></li>
                    <li>
                        <a href="#google-analyze" aria-label="Google Analyze">Google Analyze</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e6%97%b6%e9%97%b4%e7%ba%bf" aria-label="时间线">时间线</a></li>
                    <li>
                        <a href="#%e7%95%99%e8%a8%80%e6%9d%bf" aria-label="留言板">留言板</a></li>
                    <li>
                        <a href="#%e6%b7%bb%e5%8a%a0%e6%9c%80%e8%bf%91%e4%bf%ae%e6%94%b9%e6%97%b6%e9%97%b4" aria-label="添加最近修改时间">添加最近修改时间</a></li>
                    <li>
                        <a href="#%e8%87%aa%e5%ae%9a%e4%b9%89%e5%9f%9f%e5%90%8d" aria-label="自定义域名">自定义域名</a></li>
                    <li>
                        <a href="#%e5%8f%8b%e9%93%be" aria-label="友链">友链</a></li>
                    <li>
                        <a href="#%e5%85%a8%e7%ab%99%e6%96%87%e7%ab%a0%e5%92%8c%e5%ad%97%e6%95%b0%e7%bb%9f%e8%ae%a1" aria-label="全站文章和字数统计">全站文章和字数统计</a></li>
                    <li>
                        <a href="#%e5%8f%b3%e4%be%a7%e8%be%b9%e6%a0%8f" aria-label="右侧边栏">右侧边栏</a><ul>
                            
                    <li>
                        <a href="#%e5%ba%95%e9%83%a8%e6%82%ac%e6%b5%ae%e6%8c%89%e9%92%ae" aria-label="底部悬浮按钮">底部悬浮按钮</a></li>
                    <li>
                        <a href="#%e4%bd%9c%e8%80%85%e4%bf%a1%e6%81%af%e6%a0%8f" aria-label="作者信息栏">作者信息栏</a></li></ul>
                    </li></ul>
                    </li>
                    <li>
                        <a href="#%e7%95%8c%e9%9d%a2%e6%98%be%e7%a4%ba%e4%bc%98%e5%8c%96" aria-label="界面显示优化">界面显示优化</a><ul>
                            
                    <li>
                        <a href="#%e9%85%8d%e7%bd%ae%e9%bb%98%e8%ae%a4%e8%af%ad%e8%a8%80%e4%b8%ba%e4%b8%ad%e6%96%87" aria-label="配置默认语言为中文">配置默认语言为中文</a></li>
                    <li>
                        <a href="#%e6%97%a5%e6%9c%9f%e6%a0%bc%e5%bc%8f%e6%98%be%e7%a4%ba%e4%bc%98%e5%8c%96" aria-label="日期格式显示优化">日期格式显示优化</a></li>
                    <li>
                        <a href="#%e6%a0%87%e7%ad%be%e9%a1%b5%e6%b7%bb%e5%8a%a0%e8%af%8d%e4%ba%91" aria-label="标签页添加词云">标签页添加词云</a></li>
                    <li>
                        <a href="#url%e7%ae%a1%e7%90%86" aria-label="url管理">url管理</a></li>
                    <li>
                        <a href="#%e4%b8%ba%e6%96%87%e7%ab%a0%e6%b7%bb%e5%8a%a0%e8%bf%87%e6%9c%9f%e6%8f%90%e7%a4%ba" aria-label="为文章添加过期提示">为文章添加过期提示</a>
                    </li>
                </ul>
                </li>
                </ul>
            </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    
    document.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();
    
        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
        if (elements.length > 0) {
            
            activeElement = elements[0];
            const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
            document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
        }
    
        
        const topLink = document.getElementById('top-link');
        if (topLink) {
            topLink.addEventListener('click', (event) => {
                
                event.preventDefault();
    
                
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        }
    }, false);
    
    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);
    
    window.addEventListener('scroll', () => {
        
        const scrollPosition = window.pageYOffset || document.documentElement.scrollTop;
    
        
        if (scrollPosition === 0) {
            return;
        }
    
        
        if (elements && elements.length > 0) {
            
            activeElement = Array.from(elements).find((element) => {
                if ((getOffsetTop(element) - scrollPosition) > 0 && 
                    (getOffsetTop(element) - scrollPosition) < window.innerHeight / 2) {
                    return element;
                }
            }) || activeElement;
    
            elements.forEach(element => {
                const id = encodeURI(element.getAttribute('id')).toLowerCase();
                const tocLink = document.querySelector(`.inner ul li a[href="#${id}"]`);
                if (element === activeElement){
                    tocLink.classList.add('active');
    
                    
                    const tocContainer = document.querySelector('.toc .inner');
                    const linkOffsetTop = tocLink.offsetTop;
                    const containerHeight = tocContainer.clientHeight;
                    const linkHeight = tocLink.clientHeight;
    
                    
                    const scrollPosition = linkOffsetTop - (containerHeight / 2) + (linkHeight / 2);
                    tocContainer.scrollTo({ top: scrollPosition, behavior: 'smooth' });
                } else {
                    tocLink.classList.remove('active');
                }
            });
        }
    }, false);
    
    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);
    
    function checkTocPosition() {
        const width = document.body.scrollWidth;
    
        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }
    
    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
    
</script>
<aside class="right-side">
    <div class="author-info">
        
        <img src="/homepage.jpg" class="author-avatar" />

        
        <div>
            <div class="social-icons">
                <a href="https://github.com/ZaNksC" target="_blank" rel="noopener noreferrer me"
                    title="Github">
                    <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path
        d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22">
    </path>
</svg>
                </a>
                <a href="mailto:za_nks@hotmail.com" target="_blank" rel="noopener noreferrer me"
                    title="Email">
                    <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 21" fill="none" stroke="currentColor"
    stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
    <polyline points="22,6 12,13 2,6"></polyline>
</svg>
                </a>
            </div>
        </div>
        
        <div class="last-mod">
            <div class="last-mod-title">
                <div class="custom-divider"></div>
                <div style="width: 100%;">最近更新</div>
                <div class="custom-divider"></div>
            </div>
            <div class="last-mod-table">
                
                
                
                <a class="last-mod-item" href="/2024/01/01/hugo-3/">
                    <div class="last-mod-item-tile">【Hugo】体验篇：Obsidian写作 </div>
                    <div class="last-mod-item-time">
                        
                        <svg t="1735543415889" class="last-mod-icon" viewBox="0 0 1024 1024" version="1.1"
                            xmlns="http://www.w3.org/2000/svg" p-id="5269" width="200" height="200">
                            <path
                                d="M512 938.666667C277.333333 938.666667 85.333333 746.666667 85.333333 512c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667c0 187.733333 153.6 341.333333 341.333333 341.333333s341.333333-153.6 341.333333-341.333333-153.6-341.333333-341.333333-341.333333C396.8 170.666667 290.133333 226.133333 230.4 324.266667 213.333333 341.333333 187.733333 345.6 170.666667 332.8 149.333333 320 145.066667 294.4 157.866667 273.066667 234.666667 157.866667 371.2 85.333333 512 85.333333c234.666667 0 426.666667 192 426.666667 426.666667S746.666667 938.666667 512 938.666667zM512 554.666667c-25.6 0-42.666667-17.066667-42.666667-42.666667L469.333333 298.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 213.333333C554.666667 537.6 537.6 554.666667 512 554.666667zM640 682.666667c-12.8 0-21.333333-4.266667-29.866667-12.8l-128-128c-17.066667-17.066667-17.066667-42.666667 0-59.733333s42.666667-17.066667 59.733333 0l128 128c17.066667 17.066667 17.066667 42.666667 0 59.733333C661.333333 678.4 652.8 682.666667 640 682.666667zM341.333333 341.333333 170.666667 341.333333C145.066667 341.333333 128 324.266667 128 298.666667L128 128c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 128 128 0c25.6 0 42.666667 17.066667 42.666667 42.666667S366.933333 341.333333 341.333333 341.333333z"
                                fill="var(--text-color)" p-id="5270"></path>
                        </svg>
                        <div>
                            2024-12-30
                        </div>
                        <svg t="1735544175558" class="last-mod-icon" viewBox="0 0 1024 1024" version="1.1"
                            xmlns="http://www.w3.org/2000/svg" p-id="6749" width="200" height="200" fill="var(--text-color)">
                            <path
                                d="M797.653 932.511l80.935-39.61c9.902 36.182 15.234 74.65 15.234 113.69v8.188h-87.98v-6.475c0-25.708-2.857-50.846-8.19-75.793zM643.78 715.034a332.254 332.254 0 0 0-175.39-50.084c-185.865 0-336.88 153.3-336.88 342.593v6.475H43.72v-8.19c0-201.099 135.78-370.015 318.788-417.814-113.69-45.514-188.15-156.157-188.15-278.607 0-164.916 131.782-299.554 294.223-299.554 162.06 0 294.222 134.066 294.222 299.554 0 127.02-78.078 235.378-188.15 278.607 39.61 10.474 78.079 26.851 113.119 48.37l-43.99 78.65zM263.863 309.598c0 114.832 91.98 208.526 204.527 208.526 113.119 0 204.528-93.313 204.528-208.526 0-114.833-91.98-208.527-204.528-208.527-112.356 0.381-204.527 93.694-204.527 208.527z m713.37 173.486c-2.856 20.948-6.475 43.039-11.045 67.605-4.57 23.804-9.331 48.37-14.664 72.936-4.57 22.662-9.902 44.943-15.806 67.605l-72.175 40.182c8.76-2.857 17.52-4.57 25.709-7.618 7.046-2.285 14.473-4.57 22.09-6.474 7.618-2.286 13.902-4 18.663-6.475l-7.617 29.136c-2.285 8.189-4 14.473-5.904 18.092-3.428 9.902-8.188 19.234-12.759 27.422-4.57 8.76-9.903 15.806-13.33 22.09-4.57 7.047-9.903 14.474-15.806 19.806l-66.462 19.805L862.4 857.1c-7.046 6.475-15.235 12.188-23.233 19.234-7.047 5.332-15.235 11.045-24.567 17.52-9.33 6.475-19.233 11.616-29.136 16.377-10.474 5.333-22.09 7.618-33.707 8.19-12.188 0-23.805-0.572-35.04-2.857-13.33-1.714-26.28-5.333-38.468-9.332 3.999-6.475 8.189-12.759 12.759-20.948 4-7.046 8.76-14.663 14.473-23.233s11.617-18.662 17.52-29.708c16.949-29.708 33.707-58.273 50.085-86.838s30.85-54.274 43.61-77.507c15.234-26.852 29.136-51.799 42.466-75.793-16.948 19.805-35.04 41.895-53.702 66.462-18.663 24.566-36.754 48.941-54.274 74.079-20.948 30.85-41.325 62.272-60.559 94.456-4.57 7.046-9.331 15.234-14.473 23.804-5.332 8.76-11.045 18.663-16.949 29.137-5.903 10.474-11.616 20.376-18.662 31.421-5.904 10.474-12.188 21.52-18.663 31.422-14.473 23.805-29.136 48.942-44.371 74.65 0.571-7.617 1.714-17.52 3.999-29.707 2.285-10.474 5.903-23.233 11.045-38.468 4.57-15.235 12.188-33.707 21.52-54.274 6.474-12.76 11.044-23.233 13.901-30.85s5.903-12.76 7.617-16.95c1.143-2.856 2.286-6.474 4.57-8.76-1.713-2.284-2.284-6.474-0.57-12.758 0.57-5.904 2.285-14.473 6.474-25.71 3.428-11.044 9.332-26.85 17.52-46.656 8.19-20.376 19.234-42.467 32.565-65.89 13.33-23.805 28.565-46.657 45.514-69.89 16.949-23.233 35.611-46.085 54.845-67.605 18.663-20.947 39.04-40.181 60.558-58.273 20.377-16.948 41.325-30.85 61.701-41.324s40.754-16.949 59.988-18.091c2.475 12.95 1.333 29.707-1.524 50.655z"
                                p-id="6750"></path>
                        </svg>
                        <div> Zanks </div>
                    </div>
                </a>
                
                <a class="last-mod-item" href="/2024/01/01/hugo-2/">
                    <div class="last-mod-item-tile">【Hugo】进阶篇：PaperMod主题美化 </div>
                    <div class="last-mod-item-time">
                        
                        <svg t="1735543415889" class="last-mod-icon" viewBox="0 0 1024 1024" version="1.1"
                            xmlns="http://www.w3.org/2000/svg" p-id="5269" width="200" height="200">
                            <path
                                d="M512 938.666667C277.333333 938.666667 85.333333 746.666667 85.333333 512c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667c0 187.733333 153.6 341.333333 341.333333 341.333333s341.333333-153.6 341.333333-341.333333-153.6-341.333333-341.333333-341.333333C396.8 170.666667 290.133333 226.133333 230.4 324.266667 213.333333 341.333333 187.733333 345.6 170.666667 332.8 149.333333 320 145.066667 294.4 157.866667 273.066667 234.666667 157.866667 371.2 85.333333 512 85.333333c234.666667 0 426.666667 192 426.666667 426.666667S746.666667 938.666667 512 938.666667zM512 554.666667c-25.6 0-42.666667-17.066667-42.666667-42.666667L469.333333 298.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 213.333333C554.666667 537.6 537.6 554.666667 512 554.666667zM640 682.666667c-12.8 0-21.333333-4.266667-29.866667-12.8l-128-128c-17.066667-17.066667-17.066667-42.666667 0-59.733333s42.666667-17.066667 59.733333 0l128 128c17.066667 17.066667 17.066667 42.666667 0 59.733333C661.333333 678.4 652.8 682.666667 640 682.666667zM341.333333 341.333333 170.666667 341.333333C145.066667 341.333333 128 324.266667 128 298.666667L128 128c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 128 128 0c25.6 0 42.666667 17.066667 42.666667 42.666667S366.933333 341.333333 341.333333 341.333333z"
                                fill="var(--text-color)" p-id="5270"></path>
                        </svg>
                        <div>
                            2024-12-30
                        </div>
                        <svg t="1735544175558" class="last-mod-icon" viewBox="0 0 1024 1024" version="1.1"
                            xmlns="http://www.w3.org/2000/svg" p-id="6749" width="200" height="200" fill="var(--text-color)">
                            <path
                                d="M797.653 932.511l80.935-39.61c9.902 36.182 15.234 74.65 15.234 113.69v8.188h-87.98v-6.475c0-25.708-2.857-50.846-8.19-75.793zM643.78 715.034a332.254 332.254 0 0 0-175.39-50.084c-185.865 0-336.88 153.3-336.88 342.593v6.475H43.72v-8.19c0-201.099 135.78-370.015 318.788-417.814-113.69-45.514-188.15-156.157-188.15-278.607 0-164.916 131.782-299.554 294.223-299.554 162.06 0 294.222 134.066 294.222 299.554 0 127.02-78.078 235.378-188.15 278.607 39.61 10.474 78.079 26.851 113.119 48.37l-43.99 78.65zM263.863 309.598c0 114.832 91.98 208.526 204.527 208.526 113.119 0 204.528-93.313 204.528-208.526 0-114.833-91.98-208.527-204.528-208.527-112.356 0.381-204.527 93.694-204.527 208.527z m713.37 173.486c-2.856 20.948-6.475 43.039-11.045 67.605-4.57 23.804-9.331 48.37-14.664 72.936-4.57 22.662-9.902 44.943-15.806 67.605l-72.175 40.182c8.76-2.857 17.52-4.57 25.709-7.618 7.046-2.285 14.473-4.57 22.09-6.474 7.618-2.286 13.902-4 18.663-6.475l-7.617 29.136c-2.285 8.189-4 14.473-5.904 18.092-3.428 9.902-8.188 19.234-12.759 27.422-4.57 8.76-9.903 15.806-13.33 22.09-4.57 7.047-9.903 14.474-15.806 19.806l-66.462 19.805L862.4 857.1c-7.046 6.475-15.235 12.188-23.233 19.234-7.047 5.332-15.235 11.045-24.567 17.52-9.33 6.475-19.233 11.616-29.136 16.377-10.474 5.333-22.09 7.618-33.707 8.19-12.188 0-23.805-0.572-35.04-2.857-13.33-1.714-26.28-5.333-38.468-9.332 3.999-6.475 8.189-12.759 12.759-20.948 4-7.046 8.76-14.663 14.473-23.233s11.617-18.662 17.52-29.708c16.949-29.708 33.707-58.273 50.085-86.838s30.85-54.274 43.61-77.507c15.234-26.852 29.136-51.799 42.466-75.793-16.948 19.805-35.04 41.895-53.702 66.462-18.663 24.566-36.754 48.941-54.274 74.079-20.948 30.85-41.325 62.272-60.559 94.456-4.57 7.046-9.331 15.234-14.473 23.804-5.332 8.76-11.045 18.663-16.949 29.137-5.903 10.474-11.616 20.376-18.662 31.421-5.904 10.474-12.188 21.52-18.663 31.422-14.473 23.805-29.136 48.942-44.371 74.65 0.571-7.617 1.714-17.52 3.999-29.707 2.285-10.474 5.903-23.233 11.045-38.468 4.57-15.235 12.188-33.707 21.52-54.274 6.474-12.76 11.044-23.233 13.901-30.85s5.903-12.76 7.617-16.95c1.143-2.856 2.286-6.474 4.57-8.76-1.713-2.284-2.284-6.474-0.57-12.758 0.57-5.904 2.285-14.473 6.474-25.71 3.428-11.044 9.332-26.85 17.52-46.656 8.19-20.376 19.234-42.467 32.565-65.89 13.33-23.805 28.565-46.657 45.514-69.89 16.949-23.233 35.611-46.085 54.845-67.605 18.663-20.947 39.04-40.181 60.558-58.273 20.377-16.948 41.325-30.85 61.701-41.324s40.754-16.949 59.988-18.091c2.475 12.95 1.333 29.707-1.524 50.655z"
                                p-id="6750"></path>
                        </svg>
                        <div> Zanks </div>
                    </div>
                </a>
                
                <a class="last-mod-item" href="/2024/01/01/hugo-1/">
                    <div class="last-mod-item-tile">【Hugo】基础篇：个人博客搭建 </div>
                    <div class="last-mod-item-time">
                        
                        <svg t="1735543415889" class="last-mod-icon" viewBox="0 0 1024 1024" version="1.1"
                            xmlns="http://www.w3.org/2000/svg" p-id="5269" width="200" height="200">
                            <path
                                d="M512 938.666667C277.333333 938.666667 85.333333 746.666667 85.333333 512c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667c0 187.733333 153.6 341.333333 341.333333 341.333333s341.333333-153.6 341.333333-341.333333-153.6-341.333333-341.333333-341.333333C396.8 170.666667 290.133333 226.133333 230.4 324.266667 213.333333 341.333333 187.733333 345.6 170.666667 332.8 149.333333 320 145.066667 294.4 157.866667 273.066667 234.666667 157.866667 371.2 85.333333 512 85.333333c234.666667 0 426.666667 192 426.666667 426.666667S746.666667 938.666667 512 938.666667zM512 554.666667c-25.6 0-42.666667-17.066667-42.666667-42.666667L469.333333 298.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 213.333333C554.666667 537.6 537.6 554.666667 512 554.666667zM640 682.666667c-12.8 0-21.333333-4.266667-29.866667-12.8l-128-128c-17.066667-17.066667-17.066667-42.666667 0-59.733333s42.666667-17.066667 59.733333 0l128 128c17.066667 17.066667 17.066667 42.666667 0 59.733333C661.333333 678.4 652.8 682.666667 640 682.666667zM341.333333 341.333333 170.666667 341.333333C145.066667 341.333333 128 324.266667 128 298.666667L128 128c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 128 128 0c25.6 0 42.666667 17.066667 42.666667 42.666667S366.933333 341.333333 341.333333 341.333333z"
                                fill="var(--text-color)" p-id="5270"></path>
                        </svg>
                        <div>
                            2024-12-30
                        </div>
                        <svg t="1735544175558" class="last-mod-icon" viewBox="0 0 1024 1024" version="1.1"
                            xmlns="http://www.w3.org/2000/svg" p-id="6749" width="200" height="200" fill="var(--text-color)">
                            <path
                                d="M797.653 932.511l80.935-39.61c9.902 36.182 15.234 74.65 15.234 113.69v8.188h-87.98v-6.475c0-25.708-2.857-50.846-8.19-75.793zM643.78 715.034a332.254 332.254 0 0 0-175.39-50.084c-185.865 0-336.88 153.3-336.88 342.593v6.475H43.72v-8.19c0-201.099 135.78-370.015 318.788-417.814-113.69-45.514-188.15-156.157-188.15-278.607 0-164.916 131.782-299.554 294.223-299.554 162.06 0 294.222 134.066 294.222 299.554 0 127.02-78.078 235.378-188.15 278.607 39.61 10.474 78.079 26.851 113.119 48.37l-43.99 78.65zM263.863 309.598c0 114.832 91.98 208.526 204.527 208.526 113.119 0 204.528-93.313 204.528-208.526 0-114.833-91.98-208.527-204.528-208.527-112.356 0.381-204.527 93.694-204.527 208.527z m713.37 173.486c-2.856 20.948-6.475 43.039-11.045 67.605-4.57 23.804-9.331 48.37-14.664 72.936-4.57 22.662-9.902 44.943-15.806 67.605l-72.175 40.182c8.76-2.857 17.52-4.57 25.709-7.618 7.046-2.285 14.473-4.57 22.09-6.474 7.618-2.286 13.902-4 18.663-6.475l-7.617 29.136c-2.285 8.189-4 14.473-5.904 18.092-3.428 9.902-8.188 19.234-12.759 27.422-4.57 8.76-9.903 15.806-13.33 22.09-4.57 7.047-9.903 14.474-15.806 19.806l-66.462 19.805L862.4 857.1c-7.046 6.475-15.235 12.188-23.233 19.234-7.047 5.332-15.235 11.045-24.567 17.52-9.33 6.475-19.233 11.616-29.136 16.377-10.474 5.333-22.09 7.618-33.707 8.19-12.188 0-23.805-0.572-35.04-2.857-13.33-1.714-26.28-5.333-38.468-9.332 3.999-6.475 8.189-12.759 12.759-20.948 4-7.046 8.76-14.663 14.473-23.233s11.617-18.662 17.52-29.708c16.949-29.708 33.707-58.273 50.085-86.838s30.85-54.274 43.61-77.507c15.234-26.852 29.136-51.799 42.466-75.793-16.948 19.805-35.04 41.895-53.702 66.462-18.663 24.566-36.754 48.941-54.274 74.079-20.948 30.85-41.325 62.272-60.559 94.456-4.57 7.046-9.331 15.234-14.473 23.804-5.332 8.76-11.045 18.663-16.949 29.137-5.903 10.474-11.616 20.376-18.662 31.421-5.904 10.474-12.188 21.52-18.663 31.422-14.473 23.805-29.136 48.942-44.371 74.65 0.571-7.617 1.714-17.52 3.999-29.707 2.285-10.474 5.903-23.233 11.045-38.468 4.57-15.235 12.188-33.707 21.52-54.274 6.474-12.76 11.044-23.233 13.901-30.85s5.903-12.76 7.617-16.95c1.143-2.856 2.286-6.474 4.57-8.76-1.713-2.284-2.284-6.474-0.57-12.758 0.57-5.904 2.285-14.473 6.474-25.71 3.428-11.044 9.332-26.85 17.52-46.656 8.19-20.376 19.234-42.467 32.565-65.89 13.33-23.805 28.565-46.657 45.514-69.89 16.949-23.233 35.611-46.085 54.845-67.605 18.663-20.947 39.04-40.181 60.558-58.273 20.377-16.948 41.325-30.85 61.701-41.324s40.754-16.949 59.988-18.091c2.475 12.95 1.333 29.707-1.524 50.655z"
                                p-id="6750"></path>
                        </svg>
                        <div> Zanks </div>
                    </div>
                </a>
                
            </div>
        </div>
    </div>

    
    <div class="right-side-btns"><script src="/js/go-comment.js"></script>
        <a href="#comments-title" class="right-side-btn" id="comments-link"
            style="visibility: visible; opacity: 1;padding: 0.6rem;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29.338 29.338" fill="currentColor">
                <path d="M27.184,1.605H2.156C0.967,1.605,0,2.572,0,3.76v17.572c0,1.188,0.967,2.155,2.156,2.155h13.543
        l5.057,3.777c0.414,0.31,0.842,0.468,1.268,0.468c0.789,0,1.639-0.602,1.637-1.923v-2.322h3.523c1.188,0,2.154-0.967,2.154-2.155
        V3.76C29.338,2.572,28.371,1.605,27.184,1.605z M27.34,21.332c0,0.085-0.068,0.155-0.154,0.155h-5.523v3.955l-5.297-3.956H2.156
        c-0.086,0-0.154-0.07-0.154-0.155V3.759c0-0.085,0.068-0.155,0.154-0.155v0.001h25.029c0.086,0,0.154,0.07,0.154,0.155
        L27.34,21.332L27.34,21.332z M5.505,10.792h4.334v4.333H5.505C5.505,15.125,5.505,10.792,5.505,10.792z M12.505,10.792h4.334v4.333
        h-4.334V10.792z M19.505,10.792h4.334v4.333h-4.334V10.792z" />
            </svg>
        </a>
        <script src="/js/go-top.js"></script>
        <a href="#top" class="right-side-btn" id="top-link" style="text-align: center;">
            <span id="pe-read-progress"></span>
        </a>
    </div>
</aside>
  <div class="post-content"><blockquote>
<p>装修一下旧时代的船，才能开门迎接更多的客人。</p>
</blockquote>
<h1 id="前言">前言<a hidden class="anchor" aria-hidden="true" href="#前言">#</a></h1>
<p>搭建完博客之后，总是会觉得这不满意，然后在搭建过程中，用相同的建站工具和主题搜索，会发现网上有很多大佬已经搭建好的站点，就会这个功能也想要，那个功能也想要。在这里，我记录了一些我搭建过程中进行基础功能拓展和美化的过程。希望可以帮助到有缘人~</p>
<p>以下教程为进阶版的简略教程，需要你有比较扎实的编程基础（或者不爱思考的脑袋），很多教程来自网上其他大佬，由于看了太多的教程，链接引用不全请见谅，如果有大佬看到了可以联系我加上。</p>
<p>以下修改html和css的代码都不建议在themes文件夹直接修改，html可以在layout目录下新建同名文件（复制过来改），css可以在assets目录下新建，最终构建都会打包到public中并使用自定义的覆盖主题文件夹中的内容。</p>
<p>好了，接下来就是博客裁缝的展示环节了。</p>
<h1 id="拓展功能">拓展功能<a hidden class="anchor" aria-hidden="true" href="#拓展功能">#</a></h1>
<h2 id="评论">评论<a hidden class="anchor" aria-hidden="true" href="#评论">#</a></h2>
<h3 id="gisucs">Gisucs<a hidden class="anchor" aria-hidden="true" href="#gisucs">#</a></h3>
<p>选用Gisucs作为评论服务，最开始我的选择是Gisucs，但是后来我放弃了。Github作为存储虽然是全免费，非常优雅，但是要求评论者拥有一个Github账号对于用于体验实在是不太友好。</p>
<h4 id="github配置">Github配置<a hidden class="anchor" aria-hidden="true" href="#github配置">#</a></h4>
<p>参考链接： <a href="https://giscus.app/zh-CN#repository">https://giscus.app/zh-CN#repository</a></p>
<ol>
<li>在某个Github公开仓库开启discussion功能（settings进入）</li>
<li>在Github安装Gisucs APP</li>
<li>记录生成的配置和代码，需要配置到自己的项目中</li>
</ol>
<h4 id="hugo配置">Hugo配置<a hidden class="anchor" aria-hidden="true" href="#hugo配置">#</a></h4>
<p>参考链接： <a href="https://www.tofuwine.cn/posts/610b75f5/#pe-comments">https://www.tofuwine.cn/posts/610b75f5/#pe-comments</a></p>
<ol>
<li>添加文件 <code>layouts/partials/comments.html</code>,输入以下内容</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;comments-title&#34;</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;tw-comment-title&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">p</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;x-comments-title&#34;</span>&gt;{{- .Param &#34;giscus.discussionTitle&#34; }}&lt;/<span style="color:#f92672">p</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">p</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;font-size: 1rem&#34;</span>&gt;{{- .Param &#34;giscus.discussionSubtitle&#34; }} &lt;/<span style="color:#f92672">p</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;tw-comment&#34;</span>&gt;&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">getStoredTheme</span> <span style="color:#f92672">=</span> () =&gt; <span style="color:#a6e22e">localStorage</span>.<span style="color:#a6e22e">getItem</span>(<span style="color:#e6db74">&#34;pref-theme&#34;</span>) <span style="color:#f92672">===</span> <span style="color:#e6db74">&#34;dark&#34;</span> <span style="color:#f92672">?</span> <span style="color:#e6db74">&#34;{{ .Site.Params.giscus.darkTheme }}&#34;</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;{{ .Site.Params.giscus.lightTheme }}&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">setGiscusTheme</span> <span style="color:#f92672">=</span> () =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">sendMessage</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">message</span>) =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">iframe</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">querySelector</span>(<span style="color:#e6db74">&#39;iframe.giscus-frame&#39;</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">iframe</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">iframe</span>.<span style="color:#a6e22e">contentWindow</span>.<span style="color:#a6e22e">postMessage</span>({<span style="color:#a6e22e">giscus</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">message</span>}, <span style="color:#e6db74">&#39;https://giscus.app&#39;</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">sendMessage</span>({<span style="color:#a6e22e">setConfig</span><span style="color:#f92672">:</span> {<span style="color:#a6e22e">theme</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">getStoredTheme</span>()}})
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    document.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#34;DOMContentLoaded&#34;</span>, () =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">giscusAttributes</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;src&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;https://giscus.app/client.js&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;data-repo&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;{{ .Site.Params.giscus.repo }}&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;data-repo-id&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;{{ .Site.Params.giscus.repoId }}&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;data-category&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;{{ .Site.Params.giscus.category }}&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;data-category-id&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;{{ .Site.Params.giscus.categoryId }}&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;data-mapping&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;{{ .Site.Params.giscus.mapping  }}&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;data-strict&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;{{ .Site.Params.giscus.strict  }}&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;data-reactions-enabled&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;{{ .Site.Params.giscus.reactionsEnabled}}&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;data-emit-metadata&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;{{ .Site.Params.giscus.emitMetadata  }}&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;data-input-position&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;{{ .Site.Params.giscus.inputPosition }}&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;data-theme&#34;</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">getStoredTheme</span>(),
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;data-lang&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;{{ .Site.Params.giscus.lang }}&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;data-loading&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;lazy&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;crossorigin&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;anonymous&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;async&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 动态创建 giscus script
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">giscusScript</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">createElement</span>(<span style="color:#e6db74">&#34;script&#34;</span>);
</span></span><span style="display:flex;"><span>        Object.<span style="color:#a6e22e">entries</span>(<span style="color:#a6e22e">giscusAttributes</span>).<span style="color:#a6e22e">forEach</span>(
</span></span><span style="display:flex;"><span>                ([<span style="color:#a6e22e">key</span>, <span style="color:#a6e22e">value</span>]) =&gt; <span style="color:#a6e22e">giscusScript</span>.<span style="color:#a6e22e">setAttribute</span>(<span style="color:#a6e22e">key</span>, <span style="color:#a6e22e">value</span>));
</span></span><span style="display:flex;"><span>        document.<span style="color:#a6e22e">querySelector</span>(<span style="color:#e6db74">&#34;#tw-comment&#34;</span>).<span style="color:#a6e22e">appendChild</span>(<span style="color:#a6e22e">giscusScript</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 页面主题变更后，变更 giscus 主题
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">themeSwitcher</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">querySelector</span>(<span style="color:#e6db74">&#34;#theme-toggle&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">themeSwitcher</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">themeSwitcher</span>.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#34;click&#34;</span>, <span style="color:#a6e22e">setGiscusTheme</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">themeFloatSwitcher</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">querySelector</span>(<span style="color:#e6db74">&#34;#theme-toggle-float&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">themeFloatSwitcher</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">themeFloatSwitcher</span>.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#34;click&#34;</span>, <span style="color:#a6e22e">setGiscusTheme</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">script</span>&gt;
</span></span></code></pre></div><ol start="2">
<li>添加文件 <code>assets/css/extended/comments.css</code>,输入以下内容</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span><span style="color:#75715e">/* giscus 评论组件 */</span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">comments-title</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">margin-top</span>: <span style="color:#ae81ff">2</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">margin-bottom</span>: <span style="color:#ae81ff">2</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">display</span>: <span style="color:#66d9ef">block</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">text-align</span>: <span style="color:#66d9ef">center</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">x-comments-title</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">display</span>: <span style="color:#66d9ef">block</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">font-size</span>: <span style="color:#ae81ff">1.25</span><span style="color:#66d9ef">em</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">font-weight</span>: <span style="color:#ae81ff">700</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">padding</span>: <span style="color:#ae81ff">1.5</span><span style="color:#66d9ef">rem</span> <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">.5</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ol start="3">
<li>在 <code>hugo.yaml</code> 中添加内容，其中 <code>{{}}</code> 包裹的需要替换成自己的内容，内容在Gisucs会生成</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>  <span style="color:#f92672">giscus</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">repo</span>: <span style="color:#e6db74">&#34;{{ REPO }}&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">repoId</span>: <span style="color:#e6db74">&#34;{ REPO_ID }&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">category</span>: <span style="color:#e6db74">&#34;Announcements&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">categoryId</span>: <span style="color:#e6db74">&#34;{{ CATEGORYID }}&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">mapping</span>: <span style="color:#e6db74">&#34;pathname&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">strict</span>: <span style="color:#e6db74">&#34;0&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">reactionsEnabled</span>: <span style="color:#e6db74">&#34;1&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">emitMetadata</span>: <span style="color:#e6db74">&#34;0&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">inputPosition</span>: <span style="color:#e6db74">&#34;bottom&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">lightTheme</span>: <span style="color:#e6db74">&#34;light&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">darkTheme</span>: <span style="color:#e6db74">&#34;dark&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">lang</span>: <span style="color:#e6db74">&#34;zh-CN&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">discussionTitle</span>: <span style="color:#ae81ff">欢迎来到评论区</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">discussionSubtitle</span>: <span style="color:#ae81ff">感谢您的耐心阅读！如需交流，请留个评论吧！</span>
</span></span></code></pre></div><ol start="4">
<li>在 <code>archetypes/default.md</code> 中添加配置 <code>comments: true</code> 来开启评论区，已有的博客也需要修改这个来开启</li>
</ol>
<h3 id="twikoo">Twikoo<a hidden class="anchor" aria-hidden="true" href="#twikoo">#</a></h3>
<p><a href="https://twikoo.js.org/intro.html">Twikoo 官网</a></p>
<p>因为Gisucs要求评论者具有Github账号有点使用者不太友好，所以后面更换了一个Twikoo</p>
<p>Twikoo的整体可以看作是一个CSS的架构，C-Hugo站点的静态JS代码，S-云函数，S-MonogoDB数据库。Twikoo的官方是懂我们这些穷鬼的，提供了很多免费部署的教程。我这边就按照官方推荐度最高的方法进行部署。MonogoDB选择MongoDB Atlas，有500MB的免费额度。Netlify部署云函数，每月 125,000 请求次数和 100 小时函数计算时长，看上去是完全够了。</p>
<h4 id="mongodb-atlas-申请资源">MongoDB Atlas 申请资源<a hidden class="anchor" aria-hidden="true" href="#mongodb-atlas-申请资源">#</a></h4>
<p><a href="https://cloud.mongodb.com">MongoDB Atlas</a></p>
<p>按照Twikoo官网指导，申请一个账号和500MB空间的MonogoDB数据库。</p>
<ol>
<li>注册MongoDB Atlas账号</li>
<li>无脑下一步，创建一个MonogoDB实例，这里创建数据库用户的时候密码记住，后面要用</li>
<li>修改Network Access为 0.0.0.0 允许所有IP访问</li>
<li>在connect中查看代码示例，选Node.js可以看到连接串，把数据库用户密码替换进去，把整个URL复制下来，等部署云函数的时候有用</li>
</ol>
<h4 id="netlify-部署云函数">Netlify 部署云函数<a hidden class="anchor" aria-hidden="true" href="#netlify-部署云函数">#</a></h4>
<p><a href="https://www.netlify.com/">Netlify</a></p>
<ol>
<li>注册Netlify账号，注册的时候需要提供身份验证（有点恶心人了），密码需要设置得复杂一点，不然直接不给登录也不提示，我通过忘记密码改了一个很复杂的~~（时隔三天来校验博客的时候我已经忘记了，但是没关系，浏览器替我记住了）~~</li>
<li>Fork官方的仓到自己的Github，从仓库部署站点，环境变量中填入 <code>MONGODB_URI</code> 值为MonoDB Atlas中复制出来的URL</li>
<li>点xxx.netlify.app进入页面，看到云函数正常运行就是部署成功了</li>
</ol>
<h4 id="前端部署">前端部署<a hidden class="anchor" aria-hidden="true" href="#前端部署">#</a></h4>
<p>需要把前端JS嵌入到Hugo的Html页面中，在 <code>layout/comments.html</code> 文件中添加代码 （如果有其他评论组件请自行删除）</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;tcomment&#34;</span>&gt;&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://cdn.jsdelivr.net/npm/twikoo@1.6.40/dist/twikoo.all.min.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">twikoo</span>.<span style="color:#a6e22e">init</span>({
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">envId</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;https://xxx.netlify.app/.netlify/functions/twikoo&#39;</span>, 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">el</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;#tcomment&#39;</span>, <span style="color:#75715e">// 容器元素
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>})
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">script</span>&gt;
</span></span></code></pre></div><h4 id="使用配置">使用配置<a hidden class="anchor" aria-hidden="true" href="#使用配置">#</a></h4>
<ol>
<li>进入管理员界面，首次进入配置密码</li>
<li>配置邮箱通知，Hotmail配置了无法测试通过，暂时没找到原因，后来配置了一个163的邮箱（需要填授权码，听说qq更方便一点，gmail没有尝试）</li>
<li>反垃圾配置，使用默认的反垃圾服务 <a href="https://akismet.com/">akismet</a>，支付一个0元账单就可以获得一个APPKey，填入配置里面就好</li>
<li>头像服务，默认的 <a href="https://weavatar.com/">weavatar</a>，注册一个账号，上传一个自己喜欢的头像。但是这边遇到了一个比较奇怪的问题，同时输入昵称和邮箱，头像就会读取失败（但是后来发现生产上好像可以），所以我在通用设置里面把必填字段改成了只填邮箱，因为昵称填QQ号会自动生成qq邮箱。</li>
</ol>
<h2 id="侧面显示目录">侧面显示目录<a hidden class="anchor" aria-hidden="true" href="#侧面显示目录">#</a></h2>
<p>参考资料： <a href="https://www.zhouxin.space/logs/introduce-side-toc-and-reading-percentage-to-papermod/">https://www.zhouxin.space/logs/introduce-side-toc-and-reading-percentage-to-papermod/</a></p>
<ol>
<li>创建文件 <code>layouts/partials/toc.html</code> 输入以下代码（代码全是抄的，别问我为什么这么写）</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>{{- $headers := findRE &#34;&lt;<span style="color:#f92672">h</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">1-6</span><span style="color:#960050;background-color:#1e0010">].*?</span>&gt;(.|\n])+?<span style="color:#960050;background-color:#1e0010">&lt;</span>/h[1-6]&gt;&#34; .Content -}}
</span></span><span style="display:flex;"><span>{{- $has_headers := ge (len $headers) 1 -}}
</span></span><span style="display:flex;"><span>{{- if $has_headers -}}
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">aside</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;toc-container&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;toc-container wide&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;toc&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">details</span> <span style="color:#960050;background-color:#1e0010">{{</span><span style="color:#a6e22e">if</span> <span style="color:#960050;background-color:#1e0010">(.</span><span style="color:#a6e22e">Param</span> <span style="color:#960050;background-color:#1e0010">&#34;</span><span style="color:#a6e22e">TocOpen</span><span style="color:#960050;background-color:#1e0010">&#34;)</span> <span style="color:#960050;background-color:#1e0010">}}</span> <span style="color:#a6e22e">open</span><span style="color:#960050;background-color:#1e0010">{{</span> <span style="color:#a6e22e">end</span> <span style="color:#960050;background-color:#1e0010">}}</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">summary</span> <span style="color:#a6e22e">accesskey</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;c&#34;</span> <span style="color:#a6e22e">title</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;(Alt + C)&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;details&#34;</span>&gt;{{- i18n &#34;toc&#34; | default &#34;Table of Contents&#34; }}&lt;/<span style="color:#f92672">span</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;/<span style="color:#f92672">summary</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;inner&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                {{- $largest := 6 -}}
</span></span><span style="display:flex;"><span>                {{- range $headers -}}
</span></span><span style="display:flex;"><span>                {{- $headerLevel := index (findRE &#34;[1-6]&#34; . 1) 0 -}}
</span></span><span style="display:flex;"><span>                {{- $headerLevel := len (seq $headerLevel) -}}
</span></span><span style="display:flex;"><span>                {{- if lt $headerLevel $largest -}}
</span></span><span style="display:flex;"><span>                {{- $largest = $headerLevel -}}
</span></span><span style="display:flex;"><span>                {{- end -}}
</span></span><span style="display:flex;"><span>                {{- end -}}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                {{- $firstHeaderLevel := len (seq (index (findRE &#34;[1-6]&#34; (index $headers 0) 1) 0)) -}}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                {{- $.Scratch.Set &#34;bareul&#34; slice -}}
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#f92672">ul</span>&gt;
</span></span><span style="display:flex;"><span>                    {{- range seq (sub $firstHeaderLevel $largest) -}}
</span></span><span style="display:flex;"><span>                    &lt;<span style="color:#f92672">ul</span>&gt;
</span></span><span style="display:flex;"><span>                        {{- $.Scratch.Add &#34;bareul&#34; (sub (add $largest .) 1) -}}
</span></span><span style="display:flex;"><span>                        {{- end -}}
</span></span><span style="display:flex;"><span>                        {{- range $i, $header := $headers -}}
</span></span><span style="display:flex;"><span>                        {{- $headerLevel := index (findRE &#34;[1-6]&#34; . 1) 0 -}}
</span></span><span style="display:flex;"><span>                        {{- $headerLevel := len (seq $headerLevel) -}}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                        {{/* get id=&#34;xyz&#34; */}}
</span></span><span style="display:flex;"><span>                        {{- $id := index (findRE &#34;(id=\&#34;(.*?)\&#34;)&#34; $header 9) 0 }}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                        {{- /* strip id=&#34;&#34; to leave xyz, no way to get regex capturing groups in hugo */ -}}
</span></span><span style="display:flex;"><span>                        {{- $cleanedID := replace (replace $id &#34;id=\&#34;&#34; &#34;&#34;) &#34;\&#34;&#34; &#34;&#34; }}
</span></span><span style="display:flex;"><span>                        {{- $header := replaceRE &#34;&lt;<span style="color:#f92672">h</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">1-6</span><span style="color:#960050;background-color:#1e0010">].*?</span>&gt;((.|\n])+?)<span style="color:#960050;background-color:#1e0010">&lt;</span>/h[1-6]&gt;&#34; &#34;$1&#34; $header -}}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                        {{- if ne $i 0 -}}
</span></span><span style="display:flex;"><span>                        {{- $prevHeaderLevel := index (findRE &#34;[1-6]&#34; (index $headers (sub $i 1)) 1) 0 -}}
</span></span><span style="display:flex;"><span>                        {{- $prevHeaderLevel := len (seq $prevHeaderLevel) -}}
</span></span><span style="display:flex;"><span>                        {{- if gt $headerLevel $prevHeaderLevel -}}
</span></span><span style="display:flex;"><span>                        {{- range seq $prevHeaderLevel (sub $headerLevel 1) -}}
</span></span><span style="display:flex;"><span>                        &lt;<span style="color:#f92672">ul</span>&gt;
</span></span><span style="display:flex;"><span>                            {{/* the first should not be recorded */}}
</span></span><span style="display:flex;"><span>                            {{- if ne $prevHeaderLevel . -}}
</span></span><span style="display:flex;"><span>                            {{- $.Scratch.Add &#34;bareul&#34; . -}}
</span></span><span style="display:flex;"><span>                            {{- end -}}
</span></span><span style="display:flex;"><span>                            {{- end -}}
</span></span><span style="display:flex;"><span>                            {{- else -}}
</span></span><span style="display:flex;"><span>                            &lt;/<span style="color:#f92672">li</span>&gt;
</span></span><span style="display:flex;"><span>                            {{- if lt $headerLevel $prevHeaderLevel -}}
</span></span><span style="display:flex;"><span>                            {{- range seq (sub $prevHeaderLevel 1) -1 $headerLevel -}}
</span></span><span style="display:flex;"><span>                            {{- if in ($.Scratch.Get &#34;bareul&#34;) . -}}
</span></span><span style="display:flex;"><span>                        &lt;/<span style="color:#f92672">ul</span>&gt;
</span></span><span style="display:flex;"><span>                        {{/* manually do pop item */}}
</span></span><span style="display:flex;"><span>                        {{- $tmp := $.Scratch.Get &#34;bareul&#34; -}}
</span></span><span style="display:flex;"><span>                        {{- $.Scratch.Delete &#34;bareul&#34; -}}
</span></span><span style="display:flex;"><span>                        {{- $.Scratch.Set &#34;bareul&#34; slice}}
</span></span><span style="display:flex;"><span>                        {{- range seq (sub (len $tmp) 1) -}}
</span></span><span style="display:flex;"><span>                        {{- $.Scratch.Add &#34;bareul&#34; (index $tmp (sub . 1)) -}}
</span></span><span style="display:flex;"><span>                        {{- end -}}
</span></span><span style="display:flex;"><span>                        {{- else -}}
</span></span><span style="display:flex;"><span>                    &lt;/<span style="color:#f92672">ul</span>&gt;
</span></span><span style="display:flex;"><span>                    &lt;/<span style="color:#f92672">li</span>&gt;
</span></span><span style="display:flex;"><span>                    {{- end -}}
</span></span><span style="display:flex;"><span>                    {{- end -}}
</span></span><span style="display:flex;"><span>                    {{- end -}}
</span></span><span style="display:flex;"><span>                    {{- end }}
</span></span><span style="display:flex;"><span>                    &lt;<span style="color:#f92672">li</span>&gt;
</span></span><span style="display:flex;"><span>                        &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;#{{- $cleanedID -}}&#34;</span> <span style="color:#a6e22e">aria-label</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{{- $header | plainify -}}&#34;</span>&gt;{{- $header | safeHTML -}}&lt;/<span style="color:#f92672">a</span>&gt;
</span></span><span style="display:flex;"><span>                        {{- else }}
</span></span><span style="display:flex;"><span>                    &lt;<span style="color:#f92672">li</span>&gt;
</span></span><span style="display:flex;"><span>                        &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;#{{- $cleanedID -}}&#34;</span> <span style="color:#a6e22e">aria-label</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{{- $header | plainify -}}&#34;</span>&gt;{{- $header | safeHTML -}}&lt;/<span style="color:#f92672">a</span>&gt;
</span></span><span style="display:flex;"><span>                        {{- end -}}
</span></span><span style="display:flex;"><span>                        {{- end -}}
</span></span><span style="display:flex;"><span>                        <span style="color:#75715e">&lt;!-- {{- $firstHeaderLevel := len (seq (index (findRE &#34;[1-6]&#34; (index $headers 0) 1) 0)) -}} --&gt;</span>
</span></span><span style="display:flex;"><span>                        {{- $firstHeaderLevel := $largest }}
</span></span><span style="display:flex;"><span>                        {{- $lastHeaderLevel := len (seq (index (findRE &#34;[1-6]&#34; (index $headers (sub (len $headers) 1)) 1) 0)) }}
</span></span><span style="display:flex;"><span>                    &lt;/<span style="color:#f92672">li</span>&gt;
</span></span><span style="display:flex;"><span>                    {{- range seq (sub $lastHeaderLevel $firstHeaderLevel) -}}
</span></span><span style="display:flex;"><span>                    {{- if in ($.Scratch.Get &#34;bareul&#34;) (add . $firstHeaderLevel) }}
</span></span><span style="display:flex;"><span>                &lt;/<span style="color:#f92672">ul</span>&gt;
</span></span><span style="display:flex;"><span>                {{- else }}
</span></span><span style="display:flex;"><span>                &lt;/<span style="color:#f92672">ul</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;/<span style="color:#f92672">li</span>&gt;
</span></span><span style="display:flex;"><span>                {{- end -}}
</span></span><span style="display:flex;"><span>                {{- end }}
</span></span><span style="display:flex;"><span>                &lt;/<span style="color:#f92672">ul</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#f92672">details</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">aside</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">activeElement</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">elements</span>;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    document.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#39;DOMContentLoaded&#39;</span>, <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">event</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">checkTocPosition</span>();
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">elements</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">querySelectorAll</span>(<span style="color:#e6db74">&#39;h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]&#39;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">elements</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Make the first header active
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">activeElement</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">elements</span>[<span style="color:#ae81ff">0</span>];
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">id</span> <span style="color:#f92672">=</span> encodeURI(<span style="color:#a6e22e">activeElement</span>.<span style="color:#a6e22e">getAttribute</span>(<span style="color:#e6db74">&#39;id&#39;</span>)).<span style="color:#a6e22e">toLowerCase</span>();
</span></span><span style="display:flex;"><span>            document.<span style="color:#a6e22e">querySelector</span>(<span style="color:#e6db74">`.inner ul li a[href=&#34;#</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">id</span><span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;]`</span>).<span style="color:#a6e22e">classList</span>.<span style="color:#a6e22e">add</span>(<span style="color:#e6db74">&#39;active&#39;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Add event listener for the &#34;back to top&#34; link
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">topLink</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">getElementById</span>(<span style="color:#e6db74">&#39;top-link&#39;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">topLink</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">topLink</span>.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#39;click&#39;</span>, (<span style="color:#a6e22e">event</span>) =&gt; {
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// Prevent the default action
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">preventDefault</span>();
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// Smooth scroll to the top
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                window.<span style="color:#a6e22e">scrollTo</span>({ <span style="color:#a6e22e">top</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">behavior</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;smooth&#39;</span> });
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }, <span style="color:#66d9ef">false</span>);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    window.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#39;resize&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">event</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">checkTocPosition</span>();
</span></span><span style="display:flex;"><span>    }, <span style="color:#66d9ef">false</span>);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    window.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#39;scroll&#39;</span>, () =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Get the current scroll position
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">scrollPosition</span> <span style="color:#f92672">=</span> window.<span style="color:#a6e22e">pageYOffset</span> <span style="color:#f92672">||</span> document.<span style="color:#a6e22e">documentElement</span>.<span style="color:#a6e22e">scrollTop</span>;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Check if the scroll position is at the top of the page
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">scrollPosition</span> <span style="color:#f92672">===</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Ensure elements is a valid NodeList
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">elements</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">elements</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Check if there is an object in the top half of the screen or keep the last item active
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">activeElement</span> <span style="color:#f92672">=</span> Array.<span style="color:#a6e22e">from</span>(<span style="color:#a6e22e">elements</span>).<span style="color:#a6e22e">find</span>((<span style="color:#a6e22e">element</span>) =&gt; {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> ((<span style="color:#a6e22e">getOffsetTop</span>(<span style="color:#a6e22e">element</span>) <span style="color:#f92672">-</span> <span style="color:#a6e22e">scrollPosition</span>) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">&amp;&amp;</span> 
</span></span><span style="display:flex;"><span>                    (<span style="color:#a6e22e">getOffsetTop</span>(<span style="color:#a6e22e">element</span>) <span style="color:#f92672">-</span> <span style="color:#a6e22e">scrollPosition</span>) <span style="color:#f92672">&lt;</span> window.<span style="color:#a6e22e">innerHeight</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>) {
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">element</span>;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }) <span style="color:#f92672">||</span> <span style="color:#a6e22e">activeElement</span>;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">elements</span>.<span style="color:#a6e22e">forEach</span>(<span style="color:#a6e22e">element</span> =&gt; {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">id</span> <span style="color:#f92672">=</span> encodeURI(<span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">getAttribute</span>(<span style="color:#e6db74">&#39;id&#39;</span>)).<span style="color:#a6e22e">toLowerCase</span>();
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">tocLink</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">querySelector</span>(<span style="color:#e6db74">`.inner ul li a[href=&#34;#</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">id</span><span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;]`</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">element</span> <span style="color:#f92672">===</span> <span style="color:#a6e22e">activeElement</span>){
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">tocLink</span>.<span style="color:#a6e22e">classList</span>.<span style="color:#a6e22e">add</span>(<span style="color:#e6db74">&#39;active&#39;</span>);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>                    <span style="color:#75715e">// Ensure the active element is in view within the .inner container
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">tocContainer</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">querySelector</span>(<span style="color:#e6db74">&#39;.toc .inner&#39;</span>);
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">linkOffsetTop</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">tocLink</span>.<span style="color:#a6e22e">offsetTop</span>;
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">containerHeight</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">tocContainer</span>.<span style="color:#a6e22e">clientHeight</span>;
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">linkHeight</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">tocLink</span>.<span style="color:#a6e22e">clientHeight</span>;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>                    <span style="color:#75715e">// Calculate the scroll position to center the active link
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">scrollPosition</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">linkOffsetTop</span> <span style="color:#f92672">-</span> (<span style="color:#a6e22e">containerHeight</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>) <span style="color:#f92672">+</span> (<span style="color:#a6e22e">linkHeight</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>);
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">tocContainer</span>.<span style="color:#a6e22e">scrollTo</span>({ <span style="color:#a6e22e">top</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">scrollPosition</span>, <span style="color:#a6e22e">behavior</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;smooth&#39;</span> });
</span></span><span style="display:flex;"><span>                } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">tocLink</span>.<span style="color:#a6e22e">classList</span>.<span style="color:#a6e22e">remove</span>(<span style="color:#e6db74">&#39;active&#39;</span>);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }, <span style="color:#66d9ef">false</span>);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">main</span> <span style="color:#f92672">=</span> parseInt(<span style="color:#a6e22e">getComputedStyle</span>(document.<span style="color:#a6e22e">body</span>).<span style="color:#a6e22e">getPropertyValue</span>(<span style="color:#e6db74">&#39;--article-width&#39;</span>), <span style="color:#ae81ff">10</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">toc</span> <span style="color:#f92672">=</span> parseInt(<span style="color:#a6e22e">getComputedStyle</span>(document.<span style="color:#a6e22e">body</span>).<span style="color:#a6e22e">getPropertyValue</span>(<span style="color:#e6db74">&#39;--toc-width&#39;</span>), <span style="color:#ae81ff">10</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">gap</span> <span style="color:#f92672">=</span> parseInt(<span style="color:#a6e22e">getComputedStyle</span>(document.<span style="color:#a6e22e">body</span>).<span style="color:#a6e22e">getPropertyValue</span>(<span style="color:#e6db74">&#39;--gap&#39;</span>), <span style="color:#ae81ff">10</span>);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">checkTocPosition</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">width</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">body</span>.<span style="color:#a6e22e">scrollWidth</span>;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">width</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">main</span> <span style="color:#f92672">-</span> (<span style="color:#a6e22e">toc</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>) <span style="color:#f92672">-</span> (<span style="color:#a6e22e">gap</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">4</span>) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>            document.<span style="color:#a6e22e">getElementById</span>(<span style="color:#e6db74">&#34;toc-container&#34;</span>).<span style="color:#a6e22e">classList</span>.<span style="color:#a6e22e">add</span>(<span style="color:#e6db74">&#34;wide&#34;</span>);
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>            document.<span style="color:#a6e22e">getElementById</span>(<span style="color:#e6db74">&#34;toc-container&#34;</span>).<span style="color:#a6e22e">classList</span>.<span style="color:#a6e22e">remove</span>(<span style="color:#e6db74">&#34;wide&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">getOffsetTop</span>(<span style="color:#a6e22e">element</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">getClientRects</span>().<span style="color:#a6e22e">length</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">rect</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">getBoundingClientRect</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">win</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">ownerDocument</span>.<span style="color:#a6e22e">defaultView</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">rect</span>.<span style="color:#a6e22e">top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">win</span>.<span style="color:#a6e22e">pageYOffset</span>;   
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>{{- end }}
</span></span></code></pre></div><ol start="2">
<li>创建 <code>assets/css/extended/toc.css</code> 文件，并输入以下内容（也是抄的，感谢大佬，赞美大佬）</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>:<span style="color:#a6e22e">root</span> {
</span></span><span style="display:flex;"><span>    --nav-width: <span style="color:#ae81ff">1380</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>    --article-width: <span style="color:#ae81ff">650</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>    --toc-width: <span style="color:#ae81ff">300</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">toc</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">margin</span>: <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">40</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">2</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">border</span>: <span style="color:#ae81ff">1</span><span style="color:#66d9ef">px</span> <span style="color:#66d9ef">solid</span> <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>border);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">background</span>: <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>entry);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">border-radius</span>: <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>radius);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">padding</span>: <span style="color:#ae81ff">0.4</span><span style="color:#66d9ef">em</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">toc-container</span>.<span style="color:#a6e22e">wide</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">position</span>: <span style="color:#66d9ef">absolute</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">height</span>: <span style="color:#ae81ff">100</span><span style="color:#66d9ef">%</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">border-right</span>: <span style="color:#ae81ff">1</span><span style="color:#66d9ef">px</span> <span style="color:#66d9ef">solid</span> <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>border);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">left</span>: calc((<span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>toc<span style="color:#f92672">-</span>width) <span style="color:#f92672">+</span> <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>gap)) <span style="color:#f92672">*</span> <span style="color:#ae81ff">-1</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">top</span>: calc(<span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>gap) <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">width</span>: <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>toc<span style="color:#f92672">-</span>width);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">wide</span> .<span style="color:#a6e22e">toc</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">position</span>: <span style="color:#66d9ef">sticky</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">top</span>: <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>gap);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">border</span>: <span style="color:#66d9ef">unset</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">background</span>: <span style="color:#66d9ef">unset</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">border-radius</span>: <span style="color:#66d9ef">unset</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">width</span>: <span style="color:#ae81ff">100</span><span style="color:#66d9ef">%</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">margin</span>: <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">40</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">2</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">toc</span> <span style="color:#f92672">details</span> <span style="color:#f92672">summary</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">cursor</span>: <span style="color:#66d9ef">zoom-in</span>;
</span></span><span style="display:flex;"><span>    margin-inline-start: <span style="color:#ae81ff">20</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">padding</span>: <span style="color:#ae81ff">12</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">toc</span> <span style="color:#f92672">details</span><span style="color:#f92672">[</span><span style="color:#f92672">open</span><span style="color:#f92672">]</span> <span style="color:#f92672">summary</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">font-weight</span>: <span style="color:#ae81ff">500</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">toc-container</span>.<span style="color:#a6e22e">wide</span> .<span style="color:#a6e22e">toc</span> .<span style="color:#a6e22e">inner</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">margin</span>: <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">active</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">font-size</span>: <span style="color:#ae81ff">110</span><span style="color:#66d9ef">%</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">font-weight</span>: <span style="color:#ae81ff">600</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">toc</span> <span style="color:#f92672">ul</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">list-style-type</span>: <span style="color:#66d9ef">circle</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">toc</span> .<span style="color:#a6e22e">inner</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">margin</span>: <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">20</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">padding</span>: <span style="color:#ae81ff">0</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">15</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">15</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">20</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">font-size</span>: <span style="color:#ae81ff">16</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/*目录显示高度*/</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">max-height</span>: <span style="color:#ae81ff">83</span><span style="color:#66d9ef">vh</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">overflow-y</span>: <span style="color:#66d9ef">auto</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">toc</span> .<span style="color:#a6e22e">inner</span>::<span style="color:#a6e22e">-webkit-scrollbar-thumb</span> {  <span style="color:#75715e">/*滚动条*/</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">background</span>: <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>border);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">border</span>: <span style="color:#ae81ff">7</span><span style="color:#66d9ef">px</span> <span style="color:#66d9ef">solid</span> <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>theme);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">border-radius</span>: <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>radius);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">toc</span> <span style="color:#f92672">li</span> <span style="color:#f92672">ul</span> {
</span></span><span style="display:flex;"><span>    margin-inline-start: calc(<span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>gap) <span style="color:#f92672">*</span> <span style="color:#ae81ff">0.5</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">list-style-type</span>: <span style="color:#66d9ef">none</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">toc</span> <span style="color:#f92672">li</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">list-style</span>: <span style="color:#66d9ef">none</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">font-size</span>: <span style="color:#ae81ff">0.95</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">padding-bottom</span>: <span style="color:#ae81ff">5</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">toc</span> <span style="color:#f92672">li</span> <span style="color:#f92672">a</span>:<span style="color:#a6e22e">hover</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">color</span>: <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>secondary);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ol start="3">
<li>同时在<code>archetypes\default.yml</code>中添加参数</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">showToc</span>: <span style="color:#66d9ef">true</span> <span style="color:#75715e"># 显示目录</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">TocOpen</span>: <span style="color:#66d9ef">true</span> <span style="color:#75715e"># 打开目录</span>
</span></span></code></pre></div><h2 id="pvuv">PV/UV<a hidden class="anchor" aria-hidden="true" href="#pvuv">#</a></h2>
<h3 id="不蒜子busuanzi">不蒜子Busuanzi<a hidden class="anchor" aria-hidden="true" href="#不蒜子busuanzi">#</a></h3>
<p>使用不蒜子Busuanzi进行站点访问统计。
参考链接： <a href="https://blog.kanikig.xyz/hugo-busuanzi/">https://blog.kanikig.xyz/hugo-busuanzi/</a></p>
<ol>
<li>添加文件 <code>layouts\parials\head.html</code> 从主题文件夹 <code>themes\layouts\parials\head.html</code> 中拷贝内容并修改，在Styles上方添加一个if块</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>{{- if site.Params.analytics.naver.SiteVerificationTag }}
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;naver-site-verification&#34;</span> <span style="color:#a6e22e">content</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{{ site.Params.analytics.naver.SiteVerificationTag }}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>{{- end }}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- 以下If块为新增内容 --&gt;</span>
</span></span><span style="display:flex;"><span>{{- if .Site.Params.busuanzi.enable -}}
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">async</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;referrer&#34;</span> <span style="color:#a6e22e">content</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;no-referrer-when-downgrade&#34;</span>&gt;
</span></span><span style="display:flex;"><span>{{- end -}}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{{- /* Styles */}}
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><ol start="2">
<li>添加文件 <code>layouts\parials\footer.html</code> 从主题文件夹 <code>themes\layouts\parials\footer.html</code> 中拷贝内容并修改，在footer标签内添加一个if块</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>{{- if not (.Param &#34;hideFooter&#34;) }}
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">footer</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;footer&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    {{- if not site.Params.footer.hideCopyright }}
</span></span><span style="display:flex;"><span>    {{- if site.Copyright }}
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">span</span>&gt;{{ site.Copyright | markdownify }}&lt;/<span style="color:#f92672">span</span>&gt;
</span></span><span style="display:flex;"><span>    {{- else }}
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">span</span>&gt;&amp;copy; {{ now.Year }} &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{{ &#34;</span><span style="color:#960050;background-color:#1e0010">&#34;</span> <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#a6e22e">absLangURL</span> <span style="color:#960050;background-color:#1e0010">}}&#34;</span>&gt;{{ site.Title }}&lt;/<span style="color:#f92672">a</span>&gt;&lt;/<span style="color:#f92672">span</span>&gt;
</span></span><span style="display:flex;"><span>    {{- end }}
</span></span><span style="display:flex;"><span>    {{- print &#34; · &#34;}}
</span></span><span style="display:flex;"><span>    {{- end }}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    {{- with site.Params.footer.text }}
</span></span><span style="display:flex;"><span>    {{ . | markdownify }}
</span></span><span style="display:flex;"><span>    {{- print &#34; · &#34;}}
</span></span><span style="display:flex;"><span>    {{- end }}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&lt;!-- 以下IF块为新增内容 --&gt;</span>
</span></span><span style="display:flex;"><span>    {{ if .Site.Params.busuanzi.enable -}}
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;busuanzi-footer&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;busuanzi_container_site_pv&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            本站总访问量&lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;busuanzi_value_site_pv&#34;</span>&gt;&lt;/<span style="color:#f92672">span</span>&gt;次
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#f92672">span</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;busuanzi_container_site_uv&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            本站访客数&lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;busuanzi_value_site_uv&#34;</span>&gt;&lt;/<span style="color:#f92672">span</span>&gt;人次
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#f92672">span</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>    {{- end -}}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">span</span>&gt;
</span></span><span style="display:flex;"><span>        Powered by
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://gohugo.io/&#34;</span> <span style="color:#a6e22e">rel</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;noopener noreferrer&#34;</span> <span style="color:#a6e22e">target</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;_blank&#34;</span>&gt;Hugo&lt;/<span style="color:#f92672">a</span>&gt; <span style="color:#960050;background-color:#1e0010">&amp;</span>
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://github.com/adityatelange/hugo-PaperMod/&#34;</span> <span style="color:#a6e22e">rel</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;noopener&#34;</span> <span style="color:#a6e22e">target</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;_blank&#34;</span>&gt;PaperMod&lt;/<span style="color:#f92672">a</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">span</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">footer</span>&gt;
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>{{- end }}
</span></span></code></pre></div><ol start="3">
<li>添加文件 <code>layouts\_defaults\single.html</code> 从主题文件夹 <code>themes\layouts\_defaults\single.html</code> 中拷贝内容并修改，在post-meta内添加一个if块</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;post-meta&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      {{- partial &#34;post_meta.html&#34; . -}}
</span></span><span style="display:flex;"><span>      {{- partial &#34;translation_list.html&#34; . -}}
</span></span><span style="display:flex;"><span>      {{- partial &#34;edit_post.html&#34; . -}}
</span></span><span style="display:flex;"><span>      {{- partial &#34;post_canonical.html&#34; . -}}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">&lt;!-- 以下If块为新增内容 --&gt;</span>
</span></span><span style="display:flex;"><span>      {{ if .Site.Params.busuanzi.enable -}}
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;meta-item&#34;</span>&gt;<span style="color:#960050;background-color:#1e0010">&amp;</span>nbsp·<span style="color:#960050;background-color:#1e0010">&amp;</span>nbsp
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;busuanzi_container_page_pv&#34;</span>&gt;本文阅读量&lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;busuanzi_value_page_pv&#34;</span>&gt;&lt;/<span style="color:#f92672">span</span>&gt;次&lt;/<span style="color:#f92672">span</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>      {{- end }}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><ol start="4">
<li>在<code>hugo.html</code>文件中的param节点中添加开关</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">params</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">busuanzi</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">enable</span>: <span style="color:#66d9ef">true</span>
</span></span></code></pre></div><h3 id="google-analyze">Google Analyze<a hidden class="anchor" aria-hidden="true" href="#google-analyze">#</a></h3>
<p>只需要在 <code>hugo.yaml</code> 中添加以下代码即可，id更换为自己在Google Analytic中申请的跟踪ID</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">services</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">googleAnalytics</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">id</span>: <span style="color:#e6db74">&#34;G-XXXXXXXXXX&#34;</span>
</span></span></code></pre></div><h2 id="时间线">时间线<a hidden class="anchor" aria-hidden="true" href="#时间线">#</a></h2>
<p>添加一个根据时间线排列的归档页面，写的多写的久才有质感。多写写吧！</p>
<ol>
<li>添加 <code>content\archive.md</code> 文件，输入以下内容</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-markdown" data-lang="markdown"><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span>title: &#34;&#34;
</span></span><span style="display:flex;"><span>layout: &#34;archives&#34;
</span></span><span style="display:flex;"><span>url: &#34;/archives/&#34;
</span></span><span style="display:flex;"><span>summary: archives
</span></span><span style="display:flex;"><span>---
</span></span></code></pre></div><ol start="2">
<li>在 <code>hugo.html</code> 中添加按钮，在 <code>menu.main</code> 节点下新增以下内容</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span>    - <span style="color:#f92672">identifier</span>: <span style="color:#ae81ff">archive</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">name</span>: <span style="color:#ae81ff">时间轴</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">url</span>: <span style="color:#ae81ff">/archives/</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">weight</span>: <span style="color:#ae81ff">11</span>
</span></span></code></pre></div><h2 id="留言板">留言板<a hidden class="anchor" aria-hidden="true" href="#留言板">#</a></h2>
<p>利用评论系统，新增一个Layout来构建一个留言板页面。</p>
<ol>
<li>创建 <code>layouts\message.html</code> 文件输入一下代码（代码从 <code>single.html</code> 中删除了很多东西，简化得到，顺便做了一下标题居中，这回是自己写的了）：</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>{{- define &#34;main&#34; }}
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">article</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;post-single&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">header</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;post-header&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">h1</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;post-title entry-hint-parent&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;margin-left: auto;margin-right: auto;&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        {{ .Title }}
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">h1</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">header</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  {{- if .Content }}
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;post-content&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    {{ .Content }}
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>  {{- end }}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">footer</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;post-footer&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;tcomment&#34;</span>&gt;&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://cdn.jsdelivr.net/npm/twikoo@1.6.40/dist/twikoo.all.min.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">twikoo</span>.<span style="color:#a6e22e">init</span>({
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">envId</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;xxx&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">el</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;#tcomment&#39;</span>,
</span></span><span style="display:flex;"><span>      })
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">footer</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">article</span>&gt;
</span></span><span style="display:flex;"><span>{{- end }}
</span></span></code></pre></div><ol start="2">
<li>在命令行中创建一个新的md文件(不要直接新建文件，我试了，编译的时候不会生成文件，会导致404)，输入 <code>hugo new message.md</code>，并在其中输入以下代码</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-markdown" data-lang="markdown"><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span>title: &#34;💬 留言板&#34;
</span></span><span style="display:flex;"><span>date: &#39;2024-12-13T21:14:22+08:00&#39;
</span></span><span style="display:flex;"><span>draft: false # 默认为草稿模式
</span></span><span style="display:flex;"><span>layout: &#34;message&#34;
</span></span><span style="display:flex;"><span>comments: true # 评论
</span></span><span style="display:flex;"><span>---
</span></span></code></pre></div><ol start="3">
<li>在 <code>hugo.yaml</code> 中新增首页目录，添加以下代码</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>    - <span style="color:#f92672">identifier</span>: <span style="color:#ae81ff">message</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">name</span>: <span style="color:#ae81ff">💬 留言板</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">url</span>: <span style="color:#ae81ff">/message/</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">weight</span>: <span style="color:#ae81ff">21</span>
</span></span></code></pre></div><h2 id="添加最近修改时间">添加最近修改时间<a hidden class="anchor" aria-hidden="true" href="#添加最近修改时间">#</a></h2>
<p>复制主题中的 <code>post_meta.html</code> 到 <code>layout/post_meta.html</code> 新增最近修改时间的内容，并修改发布时间的内容和国际化，</p>
<ol>
<li>在 <code>layout/post_meta.html</code> 输入以下代码</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>{{- $scratch := newScratch }}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{{- if not .Date.IsZero -}}
</span></span><span style="display:flex;"><span>  {{- $dateStr := .Date.Format (default &#34;January 2, 2006&#34; site.Params.DateFormat) -}}
</span></span><span style="display:flex;"><span>  {{- $translatedPublished := i18n &#34;published&#34; -}}
</span></span><span style="display:flex;"><span>  {{- $dateHTML := printf &#34;&lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">title</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;%s&#39;</span>&gt;%s&lt;/<span style="color:#f92672">span</span>&gt;&#34; (.Date) $dateStr -}}
</span></span><span style="display:flex;"><span>  {{- $scratch.Add &#34;meta&#34; (slice (printf &#34;%s %s&#34; $translatedPublished $dateHTML)) }}
</span></span><span style="display:flex;"><span>{{- end }}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{{- if not .Lastmod.IsZero -}}
</span></span><span style="display:flex;"><span>  {{- $lastmodStr := .Lastmod.Format (default &#34;January 2, 2006&#34; site.Params.DateFormat) -}}
</span></span><span style="display:flex;"><span>  {{- $translatedLastModified := i18n &#34;last_modified&#34; -}}
</span></span><span style="display:flex;"><span>  {{- $lastmodHTML := printf &#34;&lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">title</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;%s&#39;</span>&gt;%s&lt;/<span style="color:#f92672">span</span>&gt;&#34; (.Lastmod) $lastmodStr -}}
</span></span><span style="display:flex;"><span>  {{- $scratch.Add &#34;meta&#34; (slice (printf &#34;%s %s&#34; $translatedLastModified $lastmodHTML)) }}
</span></span><span style="display:flex;"><span>{{- end }}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{{- if (.Param &#34;ShowReadingTime&#34;) -}}
</span></span><span style="display:flex;"><span>{{- $scratch.Add &#34;meta&#34; (slice (i18n &#34;read_time&#34; .ReadingTime | default (printf &#34;%d min&#34; .ReadingTime))) }}
</span></span><span style="display:flex;"><span>{{- end }}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{{- if (.Param &#34;ShowWordCount&#34;) -}}
</span></span><span style="display:flex;"><span>{{- $scratch.Add &#34;meta&#34; (slice (i18n &#34;words&#34; .WordCount | default (printf &#34;%d words&#34; .WordCount))) }}
</span></span><span style="display:flex;"><span>{{- end }}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{{- if not (.Param &#34;hideAuthor&#34;) -}}
</span></span><span style="display:flex;"><span>{{- with (partial &#34;author.html&#34; .) }}
</span></span><span style="display:flex;"><span>{{- $scratch.Add &#34;meta&#34; (slice .) }}
</span></span><span style="display:flex;"><span>{{- end }}
</span></span><span style="display:flex;"><span>{{- end }}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{{- with ($scratch.Get &#34;meta&#34;) }}
</span></span><span style="display:flex;"><span>{{- delimit . &#34;&amp;nbsp;·&amp;nbsp;&#34; | safeHTML -}}
</span></span><span style="display:flex;"><span>{{- end -}}
</span></span></code></pre></div><ol start="2">
<li>在i18n文件夹的对应目录添加翻译</li>
<li>在 <code>hugo.yaml</code> 中新增配置 <code>frontmatte.lastmod: ['lastmod', ':git', 'date', 'publishDate']</code> 用于指定lastmod变量的赋值顺序</li>
</ol>
<h2 id="自定义域名">自定义域名<a hidden class="anchor" aria-hidden="true" href="#自定义域名">#</a></h2>
<p>首先需要有一个域名，在对应的域名服务商添加一条解析记录，解析类型：CNAME，解析值为 xxx.github.io (xxx替换为自己的Github用户名)</p>
<p>再添加文件 <code>static\CNAME</code> ,文件的内容为自定义的域名。没有这个文件，访问域名会出现404。</p>
<h2 id="友链">友链<a hidden class="anchor" aria-hidden="true" href="#友链">#</a></h2>
<p>参考： <a href="https://aimerneige.com/zh/post/web/add-friend-link-in-papermod-blog/">https://aimerneige.com/zh/post/web/add-friend-link-in-papermod-blog/</a></p>
<p>这个是没有脑子直接抄的</p>
<ol>
<li>创建一个文件 <code>layouts/partials/friends.html</code> 输入以下代码</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">style</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text/css&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">friends</span> {
</span></span><span style="display:flex;"><span>        --link-count-per-row: <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @<span style="color:#66d9ef">media</span> <span style="color:#f92672">screen</span> <span style="color:#f92672">and</span> <span style="color:#f92672">(</span><span style="color:#f92672">min-width</span><span style="color:#f92672">:</span> <span style="color:#f92672">576px</span><span style="color:#f92672">)</span> {
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">friends</span> {
</span></span><span style="display:flex;"><span>            --link-count-per-row: <span style="color:#ae81ff">2</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @<span style="color:#66d9ef">media</span> <span style="color:#f92672">screen</span> <span style="color:#f92672">and</span> <span style="color:#f92672">(</span><span style="color:#f92672">min-width</span><span style="color:#f92672">:</span> <span style="color:#f92672">768px</span><span style="color:#f92672">)</span> {
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">friends</span> {
</span></span><span style="display:flex;"><span>            --link-count-per-row: <span style="color:#ae81ff">3</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">friends</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">display</span>: <span style="color:#66d9ef">grid</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">grid-template-columns</span>: <span style="color:#a6e22e">repeat</span>(<span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>link<span style="color:#f92672">-</span>count<span style="color:#f92672">-</span>per<span style="color:#f92672">-</span><span style="color:#66d9ef">row</span>), <span style="color:#ae81ff">1</span>fr);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">grid-gap</span>: <span style="color:#ae81ff">16</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/* 空间占位 */</span>
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">friend-skeleton</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">height</span>: <span style="color:#ae81ff">280</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">display</span>: <span style="color:#66d9ef">inline-block</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">position</span>: <span style="color:#66d9ef">relative</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">friend</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">height</span>: <span style="color:#ae81ff">100</span><span style="color:#66d9ef">%</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">width</span>: <span style="color:#ae81ff">100</span><span style="color:#66d9ef">%</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">position</span>: <span style="color:#66d9ef">absolute</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">top</span>: <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">left</span>: <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">transition</span>: <span style="color:#ae81ff">0.67</span><span style="color:#66d9ef">s</span> cubic-bezier(<span style="color:#ae81ff">0.19</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0.22</span>, <span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">border-radius</span>: <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>radius);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">box-shadow</span>: <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">3</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">1</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">-2</span><span style="color:#66d9ef">px</span> rgba(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0.2</span>),
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">2</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">0</span> rgba(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0.14</span>), <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">1</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">5</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">0</span> rgba(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0.12</span>) <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">overflow</span>: <span style="color:#66d9ef">hidden</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">display</span>: <span style="color:#66d9ef">flex</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">flex-direction</span>: <span style="color:#66d9ef">column</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">justify-content</span>: <span style="color:#66d9ef">flex-start</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">align-items</span>: <span style="color:#66d9ef">center</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">friend</span>:<span style="color:#a6e22e">hover</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">transform</span>: translateY(<span style="color:#ae81ff">-8</span><span style="color:#66d9ef">px</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">box-shadow</span>: <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">3</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">5</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">-1</span><span style="color:#66d9ef">px</span> rgba(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0.2</span>),
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">5</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">8</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">0</span> rgba(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0.14</span>), <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">1</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">14</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">0</span> rgba(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0.12</span>) <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">friend-avatar</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">object-fit</span>: <span style="color:#66d9ef">cover</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">width</span>: <span style="color:#ae81ff">100</span><span style="color:#66d9ef">%</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">height</span>: <span style="color:#ae81ff">180</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">margin</span>: <span style="color:#ae81ff">0</span> <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">border-radius</span>: <span style="color:#ae81ff">0</span> <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">friend-content</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">text-align</span>: <span style="color:#66d9ef">center</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">flex</span>: <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">width</span>: <span style="color:#ae81ff">100</span><span style="color:#66d9ef">%</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">padding</span>: <span style="color:#ae81ff">16</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">background</span>: <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>entry);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">transform</span>: translate3d(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">friend-name</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">font-size</span>: <span style="color:#ae81ff">1.2</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">font-weight</span>: <span style="color:#66d9ef">bold</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">transform</span>: <span style="color:#66d9ef">inherit</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">friend-description</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">font-size</span>: <span style="color:#ae81ff">0.8</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">color</span>: <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>secondary);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">transform</span>: translate3d(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">style</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;friends&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    {{ range .Site.Data.friends }}
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;friend-skeleton&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{{ .link }}&#34;</span> <span style="color:#a6e22e">target</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;_blank&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;friend&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#f92672">img</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;friend-avatar&#34;</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{{ .image }}&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;friend-content&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;friend-name&#34;</span>&gt;{{ .title }}&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>                    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;friend-description&#34;</span>&gt;{{ .intro }}&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#f92672">a</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>    {{ end }}
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- style code by https://github.com/fissssssh --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- view https://github.com/fissssssh/fissssssh.github.io for more detail --&gt;</span>
</span></span></code></pre></div><ol start="2">
<li>创建 <code>default/friends.html</code> 文件，输入一下代码，用于创建新的界面</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>{{- define &#34;main&#34; }}
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">article</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;post-single&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">header</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;post-header&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    {{ partial &#34;breadcrumbs.html&#34; . }}
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">h1</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;post-title entry-hint-parent&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      {{ .Title }}
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">h1</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">header</span>&gt;
</span></span><span style="display:flex;"><span>  {{- $isHidden := (.Param &#34;cover.hiddenInSingle&#34;) | default (.Param &#34;cover.hidden&#34;) | default false }}
</span></span><span style="display:flex;"><span>  {{- partial &#34;cover.html&#34; (dict &#34;cxt&#34; . &#34;IsSingle&#34; true &#34;isHidden&#34; $isHidden) }}
</span></span><span style="display:flex;"><span>  {{- if (.Param &#34;ShowToc&#34;) }}
</span></span><span style="display:flex;"><span>  {{- partial &#34;toc.html&#34; . }}
</span></span><span style="display:flex;"><span>  {{- end }}
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;height: 40px;&#34;</span>&gt;&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>  {{ .Content }}
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;height: 40px;&#34;</span>&gt;&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>  {{ partial &#34;friends.html&#34; . }}
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;height: 40px;&#34;</span>&gt;&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>  {{- if (.Param &#34;comments&#34;) }}
</span></span><span style="display:flex;"><span>  {{- partial &#34;comments.html&#34; . }}
</span></span><span style="display:flex;"><span>  {{- end }}
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">article</span>&gt;
</span></span><span style="display:flex;"><span>{{- end }}{{/* end main */}}
</span></span></code></pre></div><ol start="3">
<li>创建 <code>posts/friends</code> 文件，输入以下内容</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span><span style="color:#f92672">title</span>: <span style="color:#e6db74">&#34;🧑‍🤝‍🧑 Zanks的朋友们 🧑‍🤝‍🧑&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">date</span>: <span style="color:#e6db74">&#39;2024-01-01T00:00:00+08:00&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">author</span>: <span style="color:#e6db74">&#34;Zanks&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">layout</span>: <span style="color:#e6db74">&#34;friends&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">comments</span>: <span style="color:#66d9ef">true</span> <span style="color:#75715e"># 评论</span>
</span></span><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">排名不分先后，按时间顺序添加。如需新增请留言，或通过其他方式联系我。</span>
</span></span></code></pre></div><ol start="4">
<li>创建 <code>data/friends.yml</code> 文件，用于存储友链的数据，以下仅为示范</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>- <span style="color:#f92672">title</span>: <span style="color:#e6db74">&#34;伞&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">intro</span>: <span style="color:#e6db74">&#34;一只咸鱼的学习记录&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">link</span>: <span style="color:#e6db74">&#34;https://umb.ink/&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">image</span>: <span style="color:#e6db74">&#34;https://avatars.githubusercontent.com/u/53655863?v=4&#34;</span>
</span></span><span style="display:flex;"><span>- <span style="color:#f92672">title</span>: <span style="color:#e6db74">&#34;HelloWorld的小博客&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">intro</span>: <span style="color:#e6db74">&#34;这里是一个小白的博客&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">link</span>: <span style="color:#e6db74">&#34;https://mzdluo123.github.io/&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">image</span>: <span style="color:#e6db74">&#34;https://avatars.githubusercontent.com/u/23146087?v=4&#34;</span>
</span></span></code></pre></div><h2 id="全站文章和字数统计">全站文章和字数统计<a hidden class="anchor" aria-hidden="true" href="#全站文章和字数统计">#</a></h2>
<p>参考：https://huuuuuuo-github-io.vercel.app/post/hugo%E6%80%BB%E5%AD%97%E6%95%B0%E7%BB%9F%E8%AE%A1/</p>
<p>可以将以下代码加入到任何喜欢的页面，我放在了About页面</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>{{$scratch := newScratch}}
</span></span><span style="display:flex;"><span>{{ range (where .Site.RegularPages &#34;Section&#34; &#34;posts&#34; )}}
</span></span><span style="display:flex;"><span>{{$scratch.Add &#34;total&#34; .WordCount}}
</span></span><span style="display:flex;"><span>{{ end }}
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>	&lt;<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>	  📚 文章数:
</span></span><span style="display:flex;"><span>	&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>	&lt;<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>	  {{ len (where .Site.RegularPages &#34;Section&#34; &#34;posts&#34;) }}
</span></span><span style="display:flex;"><span>	&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>	&lt;<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>	  ✍️ 总字数:
</span></span><span style="display:flex;"><span>	&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>	&lt;<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>	  {{ div ($scratch.Get &#34;total&#34;) 1000.0 | lang.FormatNumber 2 }}K
</span></span><span style="display:flex;"><span>	&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">div</span>&gt;
</span></span></code></pre></div><h2 id="右侧边栏">右侧边栏<a hidden class="anchor" aria-hidden="true" href="#右侧边栏">#</a></h2>
<h3 id="底部悬浮按钮">底部悬浮按钮<a hidden class="anchor" aria-hidden="true" href="#底部悬浮按钮">#</a></h3>
<p>参考了一个个性化的PaperMod主题 <a href="https://github.com/tofuwine/PaperMod-PE">https://github.com/tofuwine/PaperMod-PE</a>
实现的效果是在页面的右侧添加了一个前往评论区的按钮，重写了官方回到顶部的按钮（添加了阅读进度）</p>
<ol>
<li>在 <code>static\js</code> 目录下引入两个文件分别用于实现按钮的动态样式，实现逻辑来自PaperMod-PE源码。</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// go-comment.js
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>document.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#39;scroll&#39;</span>, <span style="color:#66d9ef">function</span> () {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">comment</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">getElementById</span>(<span style="color:#e6db74">&#34;comments-title&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">bottomToComment</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">getElementById</span>(<span style="color:#e6db74">&#34;comments-link&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">viewPortHeight</span> <span style="color:#f92672">=</span> window.<span style="color:#a6e22e">innerHeight</span> <span style="color:#f92672">||</span> document.<span style="color:#a6e22e">documentElement</span>.<span style="color:#a6e22e">clientHeight</span> <span style="color:#f92672">||</span> document.<span style="color:#a6e22e">body</span>.<span style="color:#a6e22e">clientHeight</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">offsetTop</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">comment</span>.<span style="color:#a6e22e">offsetTop</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">scrollTop</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">documentElement</span>.<span style="color:#a6e22e">scrollTop</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">top</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">offsetTop</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">scrollTop</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">top</span> <span style="color:#f92672">&lt;=</span> <span style="color:#a6e22e">viewPortHeight</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">100</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">bottomToComment</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">visibility</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;hidden&#34;</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">bottomToComment</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">opacity</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;0&#34;</span>;
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">bottomToComment</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">visibility</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;visible&#34;</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">bottomToComment</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">opacity</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;1&#34;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>})
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// go-top.js
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">menu</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">getElementById</span>(<span style="color:#e6db74">&#39;menu&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">menu</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">menu</span>.<span style="color:#a6e22e">scrollLeft</span> <span style="color:#f92672">=</span> Number(<span style="color:#a6e22e">localStorage</span>.<span style="color:#a6e22e">getItem</span>(<span style="color:#e6db74">&#34;menu-scroll-position&#34;</span>));
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">menu</span>.<span style="color:#a6e22e">onscroll</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span> () {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">localStorage</span>.<span style="color:#a6e22e">setItem</span>(<span style="color:#e6db74">&#34;menu-scroll-position&#34;</span>, <span style="color:#a6e22e">menu</span>.<span style="color:#a6e22e">scrollLeft</span>.<span style="color:#a6e22e">toString</span>());
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>window.<span style="color:#a6e22e">onscroll</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span> () {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">goTopButton</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">getElementById</span>(<span style="color:#e6db74">&#34;top-link&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (document.<span style="color:#a6e22e">body</span>.<span style="color:#a6e22e">scrollTop</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">800</span> <span style="color:#f92672">||</span> document.<span style="color:#a6e22e">documentElement</span>.<span style="color:#a6e22e">scrollTop</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">800</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">goTopButton</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">visibility</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;visible&#34;</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">goTopButton</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">opacity</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;1&#34;</span>;
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">goTopButton</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">visibility</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;hidden&#34;</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">goTopButton</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">opacity</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;0&#34;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>document.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#39;scroll&#39;</span>, <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">e</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">readProgress</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">getElementById</span>(<span style="color:#e6db74">&#34;pe-read-progress&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">scrollHeight</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">documentElement</span>.<span style="color:#a6e22e">scrollHeight</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">clientHeight</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">documentElement</span>.<span style="color:#a6e22e">clientHeight</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">scrollTop</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">documentElement</span>.<span style="color:#a6e22e">scrollTop</span> <span style="color:#f92672">||</span> document.<span style="color:#a6e22e">body</span>.<span style="color:#a6e22e">scrollTop</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">readProgress</span>.<span style="color:#a6e22e">innerText</span> <span style="color:#f92672">=</span> ((<span style="color:#a6e22e">scrollTop</span> <span style="color:#f92672">/</span> (<span style="color:#a6e22e">scrollHeight</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">clientHeight</span>)).<span style="color:#a6e22e">toFixed</span>(<span style="color:#ae81ff">2</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">100</span>).<span style="color:#a6e22e">toFixed</span>(<span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>})
</span></span></code></pre></div><ol start="2">
<li>删除原有回到顶部的按钮，或通过配置disableScrollToTop关闭（代码位于 <code>footer.html</code>）</li>
<li>添加 <code>right_aside.html</code> 文件添加右侧边栏的代码</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">aside</span>&gt;
</span></span><span style="display:flex;"><span> <span style="color:#75715e">&lt;!--右侧按钮--&gt;</span>
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;right-side-btns&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        {{- /* Scroll To Comment */ -}}
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/js/go-comment.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;#comments-title&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;right-side-btn&#34;</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;comments-link&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;visibility: visible; opacity: 1;padding: 0.6rem;&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">svg</span> <span style="color:#a6e22e">xmlns</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;http://www.w3.org/2000/svg&#34;</span> <span style="color:#a6e22e">viewBox</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;0 0 29.338 29.338&#34;</span> <span style="color:#a6e22e">fill</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;currentColor&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#f92672">path</span> <span style="color:#a6e22e">d</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;M27.184,1.605H2.156C0.967,1.605,0,2.572,0,3.76v17.572c0,1.188,0.967,2.155,2.156,2.155h13.543
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        l5.057,3.777c0.414,0.31,0.842,0.468,1.268,0.468c0.789,0,1.639-0.602,1.637-1.923v-2.322h3.523c1.188,0,2.154-0.967,2.154-2.155
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        V3.76C29.338,2.572,28.371,1.605,27.184,1.605z M27.34,21.332c0,0.085-0.068,0.155-0.154,0.155h-5.523v3.955l-5.297-3.956H2.156
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        c-0.086,0-0.154-0.07-0.154-0.155V3.759c0-0.085,0.068-0.155,0.154-0.155v0.001h25.029c0.086,0,0.154,0.07,0.154,0.155
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        L27.34,21.332L27.34,21.332z M5.505,10.792h4.334v4.333H5.505C5.505,15.125,5.505,10.792,5.505,10.792z M12.505,10.792h4.334v4.333
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        h-4.334V10.792z M19.505,10.792h4.334v4.333h-4.334V10.792z&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>            &lt;/<span style="color:#f92672">svg</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#f92672">a</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/js/go-top.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;#top&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;right-side-btn&#34;</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;top-link&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text-align: center;&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;pe-read-progress&#34;</span>&gt;&lt;/<span style="color:#f92672">span</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#f92672">a</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">aside</span>&gt;
</span></span></code></pre></div><ol start="4">
<li>添加CSS <code>asset\css\extended\right_side.css</code> 实现样式</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>:<span style="color:#a6e22e">root</span> {
</span></span><span style="display:flex;"><span>    --text-color: <span style="color:#ae81ff">#bdbdbd</span>;
</span></span><span style="display:flex;"><span>    --text-hover-color: <span style="color:#ae81ff">#373737</span>ac;
</span></span><span style="display:flex;"><span>    --right-side-width: <span style="color:#ae81ff">300</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">dark</span> {
</span></span><span style="display:flex;"><span>    --text-color: <span style="color:#ae81ff">#bdbdbd</span>;
</span></span><span style="display:flex;"><span>    --text-hover-color: <span style="color:#ae81ff">#373737</span>ac;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">right-side-btns</span><span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">right-side-btn</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">display</span>: <span style="color:#66d9ef">flex</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">flex-direction</span>: <span style="color:#66d9ef">column</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">align-items</span>: <span style="color:#66d9ef">center</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">justify-content</span>: <span style="color:#66d9ef">center</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">right-side-btns</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">position</span>: <span style="color:#66d9ef">fixed</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">right</span>: <span style="color:#ae81ff">1</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">z-index</span>: <span style="color:#ae81ff">999</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">bottom</span>: <span style="color:#ae81ff">2</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">gap</span>: <span style="color:#ae81ff">1</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">right-side-btn</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">width</span>: <span style="color:#ae81ff">2.4</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">height</span>: <span style="color:#ae81ff">2.4</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">padding</span>: <span style="color:#ae81ff">0.3</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">border-radius</span>: <span style="color:#ae81ff">50</span><span style="color:#66d9ef">%</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">background</span>: <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>tertiary);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">color</span>: <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>secondary);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">transition</span>: <span style="color:#66d9ef">all</span> <span style="color:#ae81ff">0.3</span><span style="color:#66d9ef">s</span> <span style="color:#66d9ef">ease</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">font-size</span>: <span style="color:#ae81ff">0.9</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">right-side-btn</span>:<span style="color:#a6e22e">hover</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">background-color</span>: <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span><span style="color:#66d9ef">text</span><span style="color:#f92672">-</span><span style="color:#66d9ef">color</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">color</span>: <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span><span style="color:#66d9ef">text</span><span style="color:#f92672">-</span>hover<span style="color:#f92672">-</span><span style="color:#66d9ef">color</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">outline</span>: <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="作者信息栏">作者信息栏<a hidden class="anchor" aria-hidden="true" href="#作者信息栏">#</a></h3>
<p>此部分代码在网上没找到样例可以抄，大部分都是靠着本人一边GPT一边理解自己实现的。
实现了一个可以悬浮在右侧边栏的框，展示头像、社交信息和最近更新的文章。</p>
<ol>
<li>添加一个在 <code>right-side.html</code> 中的<code>&lt;aside&gt;</code>节点下添加以下代码</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;author-info&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">&lt;!-- 头像 --&gt;</span>
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">img</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/homepage.jpg&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;author-avatar&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">&lt;!-- 社交信息 --&gt;</span>
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;social-icons&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                {{- range site.Params.socialIcons }}
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{{ trim .url &#34;</span> <span style="color:#960050;background-color:#1e0010">&#34;</span> <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#a6e22e">safeURL</span> <span style="color:#960050;background-color:#1e0010">}}&#34;</span> <span style="color:#a6e22e">target</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;_blank&#34;</span> <span style="color:#a6e22e">rel</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;noopener noreferrer me&#34;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">title</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{{ (.title | default .name) | title }}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                    {{ partial &#34;svg.html&#34; . }}
</span></span><span style="display:flex;"><span>                &lt;/<span style="color:#f92672">a</span>&gt;
</span></span><span style="display:flex;"><span>                {{- end }}
</span></span><span style="display:flex;"><span>            &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>         &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">&lt;!-- 最近更新的文章 --&gt;</span>
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;last-mod&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;custom-divider&#34;</span>&gt;&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;last-mod-title&#34;</span>&gt;最近更新&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;custom-divider&#34;</span>&gt;&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;last-mod-table&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                {{ range first 3 (where .Site.RegularPages &#34;Section&#34; &#34;posts&#34;).ByDate.Reverse }}
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;last-mod-item&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{{ .RelPermalink }}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;last-mod-item-tile&#34;</span>&gt;{{ .Title }} &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>                    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;last-mod-item-time&#34;</span>&gt; ----- 于 {{.Lastmod.Format (default &#34;January 2, 2006&#34;
</span></span><span style="display:flex;"><span>                        site.Params.DateFormat)}} 由 {{ .Params.author }} 更新&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;/<span style="color:#f92672">a</span>&gt;
</span></span><span style="display:flex;"><span>                {{ end }}
</span></span><span style="display:flex;"><span>            &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span></code></pre></div><ol start="2">
<li>在<code>asset\css\extended\right_side.css</code> 添加样式</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>.<span style="color:#a6e22e">right-side</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">position</span>: <span style="color:#66d9ef">absolute</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">height</span>: <span style="color:#ae81ff">100</span><span style="color:#66d9ef">%</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">width</span>: <span style="color:#ae81ff">25</span><span style="color:#66d9ef">%</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">border-left</span>: <span style="color:#ae81ff">1</span><span style="color:#66d9ef">px</span> <span style="color:#66d9ef">solid</span> <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>border);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">right</span>: calc((<span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span><span style="color:#66d9ef">right</span><span style="color:#f92672">-</span>side<span style="color:#f92672">-</span>width) <span style="color:#f92672">+</span> <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>gap)) <span style="color:#f92672">*</span> <span style="color:#ae81ff">-1</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">top</span>: calc(<span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>gap) <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">width</span>: <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span><span style="color:#66d9ef">right</span><span style="color:#f92672">-</span>side<span style="color:#f92672">-</span>width);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">author-info</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">display</span>: <span style="color:#66d9ef">flex</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">flex-direction</span>: <span style="color:#66d9ef">column</span>; <span style="color:#75715e">/* 设置主轴方向为纵向 */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">justify-content</span>: <span style="color:#66d9ef">center</span>; <span style="color:#75715e">/* 在主轴上居中对齐 */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">align-items</span>: <span style="color:#66d9ef">center</span>; <span style="color:#75715e">/* 在交叉轴上居中对齐 */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">margin-top</span>: <span style="color:#ae81ff">0</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">margin-left</span>: <span style="color:#ae81ff">25</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">margin-right</span>: <span style="color:#ae81ff">10</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">position</span>: <span style="color:#66d9ef">sticky</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">top</span>: <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>gap);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">border</span>: <span style="color:#ae81ff">2</span><span style="color:#66d9ef">px</span> <span style="color:#66d9ef">solid</span> <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span><span style="color:#66d9ef">text</span><span style="color:#f92672">-</span>hover<span style="color:#f92672">-</span><span style="color:#66d9ef">color</span>); <span style="color:#75715e">/* 边框宽度为2px，样式为实线，颜色为黑色 */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">box-shadow</span>: <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">4</span><span style="color:#66d9ef">px</span> <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span><span style="color:#66d9ef">text</span><span style="color:#f92672">-</span>hover<span style="color:#f92672">-</span><span style="color:#66d9ef">color</span>); <span style="color:#75715e">/* 水平偏移0px，垂直偏移4px，模糊半径8px，颜色为黑色且透明度为0.1 */</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">author-avatar</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">height</span>: <span style="color:#ae81ff">128</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">width</span>: <span style="color:#ae81ff">128</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">margin-top</span>: <span style="color:#ae81ff">20</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">border-radius</span>: <span style="color:#ae81ff">50</span><span style="color:#66d9ef">%</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">last-mod</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">width</span>: <span style="color:#ae81ff">90</span><span style="color:#66d9ef">%</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">margin-top</span>: <span style="color:#ae81ff">10</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">last-mod-table</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">display</span>: <span style="color:#66d9ef">flex</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">flex-direction</span>: <span style="color:#66d9ef">column</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">align-items</span>: <span style="color:#66d9ef">center</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">justify-content</span>: <span style="color:#66d9ef">center</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">margin-top</span>: <span style="color:#ae81ff">5</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">last-mod-title</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">text-align</span>: <span style="color:#66d9ef">center</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">font-weight</span>: <span style="color:#66d9ef">bold</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">last-mod-item</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">width</span>: <span style="color:#ae81ff">100</span><span style="color:#66d9ef">%</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">display</span>: <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">font-size</span>: <span style="color:#ae81ff">0.9</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">border</span>: <span style="color:#ae81ff">2</span><span style="color:#66d9ef">px</span> <span style="color:#66d9ef">solid</span> <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span><span style="color:#66d9ef">text</span><span style="color:#f92672">-</span>hover<span style="color:#f92672">-</span><span style="color:#66d9ef">color</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">border-radius</span>: <span style="color:#ae81ff">10</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">padding</span>: <span style="color:#ae81ff">4</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">padding-left</span>: <span style="color:#ae81ff">7</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">padding-right</span>: <span style="color:#ae81ff">7</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">margin-bottom</span>: <span style="color:#ae81ff">10</span><span style="color:#66d9ef">px</span> ;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">transition</span>: <span style="color:#66d9ef">transform</span> <span style="color:#ae81ff">0.5</span><span style="color:#66d9ef">s</span> <span style="color:#66d9ef">ease</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">last-mod-item</span>:<span style="color:#a6e22e">hover</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">border</span>: <span style="color:#ae81ff">2</span><span style="color:#66d9ef">px</span> <span style="color:#66d9ef">solid</span> <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span><span style="color:#66d9ef">text</span><span style="color:#f92672">-</span><span style="color:#66d9ef">color</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">last-mod-item-time</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">font-size</span>: <span style="color:#ae81ff">0.7</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">text-align</span>: <span style="color:#66d9ef">right</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">custom-divider</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">width</span>: <span style="color:#ae81ff">100</span><span style="color:#66d9ef">%</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">height</span>: <span style="color:#ae81ff">1</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">background</span>: repeating-linear-gradient(
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">to</span> <span style="color:#66d9ef">right</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ae81ff">#e0e0e0</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ae81ff">#e0e0e0</span> <span style="color:#ae81ff">33</span><span style="color:#66d9ef">%</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">transparent</span> <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">transparent</span> <span style="color:#ae81ff">67</span><span style="color:#66d9ef">%</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ae81ff">#e0e0e0</span> <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#ae81ff">#e0e0e0</span> <span style="color:#ae81ff">100</span><span style="color:#66d9ef">%</span>
</span></span><span style="display:flex;"><span>    );
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div><h1 id="界面显示优化">界面显示优化<a hidden class="anchor" aria-hidden="true" href="#界面显示优化">#</a></h1>
<h2 id="配置默认语言为中文">配置默认语言为中文<a hidden class="anchor" aria-hidden="true" href="#配置默认语言为中文">#</a></h2>
<p>在 <code>hugo.html</code> 文件中添加配置 <code>defaultContentLanguage: zh</code> 可以汉化大部分主题的内容</p>
<h2 id="日期格式显示优化">日期格式显示优化<a hidden class="anchor" aria-hidden="true" href="#日期格式显示优化">#</a></h2>
<p>在 <code>hugo.html</code> 文件中的Param节点下添加配置 <code>DateFormat: &quot;2006-01-02&quot;</code> (go的时间配置必须要用这个日期，yyyy-MM-dd不行)</p>
<h2 id="标签页添加词云">标签页添加词云<a hidden class="anchor" aria-hidden="true" href="#标签页添加词云">#</a></h2>
<p>参考资料： <a href="https://blog.xlap.top/post/tech/wordcloud4hugo/#%E9%A1%B9%E7%9B%AE%E5%9C%B0%E5%9D%80">https://blog.xlap.top/post/tech/wordcloud4hugo/#%E9%A1%B9%E7%9B%AE%E5%9C%B0%E5%9D%80</a>
感谢开源作者和大佬代码，我直接抄了</p>
<ol>
<li>下载 <code>wordcloud2.js</code> 拷贝到 <code>static/js/</code> 目录下，<a href="https://github.com/timdream/wordcloud2.js/blob/v1.1.1/src/wordcloud2.js">下载地址 </a></li>
<li>修改 <code>head.html</code> 引入js文件，新增以下代码：</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>{{- if eq .Section &#34;tags&#34;}}
</span></span><span style="display:flex;"><span>{{/* 标签云 */}}
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">link</span> <span style="color:#a6e22e">rel</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;stylesheet&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/css/word-cloud.css&#34;</span><span style="color:#960050;background-color:#1e0010">\</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/js/wordcloud2.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>{{- end }}
</span></span></code></pre></div><ol start="3">
<li>创建 <code>staic/css/word-cloud.css</code> 文件输入以下代码：</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>.<span style="color:#a6e22e">word-color</span>:<span style="color:#a6e22e">nth-child</span><span style="color:#f92672">(</span><span style="color:#f92672">7n</span> <span style="color:#f92672">+</span> <span style="color:#f92672">1</span><span style="color:#f92672">)</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">color</span>: rgb(<span style="color:#ae81ff">202</span>, <span style="color:#ae81ff">110</span>, <span style="color:#ae81ff">255</span>);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  .<span style="color:#a6e22e">word-color</span>:<span style="color:#a6e22e">nth-child</span><span style="color:#f92672">(</span><span style="color:#f92672">7n</span> <span style="color:#f92672">+</span> <span style="color:#f92672">2</span><span style="color:#f92672">)</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">color</span>: rgb(<span style="color:#ae81ff">83</span>, <span style="color:#ae81ff">110</span>, <span style="color:#ae81ff">255</span>);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  .<span style="color:#a6e22e">word-color</span>:<span style="color:#a6e22e">nth-child</span><span style="color:#f92672">(</span><span style="color:#f92672">7n</span> <span style="color:#f92672">+</span> <span style="color:#f92672">3</span><span style="color:#f92672">)</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">color</span>: rgb(<span style="color:#ae81ff">143</span>, <span style="color:#ae81ff">253</span>, <span style="color:#ae81ff">241</span>);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  .<span style="color:#a6e22e">word-color</span>:<span style="color:#a6e22e">nth-child</span><span style="color:#f92672">(</span><span style="color:#f92672">7n</span> <span style="color:#f92672">+</span> <span style="color:#f92672">4</span><span style="color:#f92672">)</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">color</span>: rgb(<span style="color:#ae81ff">183</span>, <span style="color:#ae81ff">255</span>, <span style="color:#ae81ff">112</span>);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  .<span style="color:#a6e22e">word-color</span>:<span style="color:#a6e22e">nth-child</span><span style="color:#f92672">(</span><span style="color:#f92672">7n</span> <span style="color:#f92672">+</span> <span style="color:#f92672">5</span><span style="color:#f92672">)</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">color</span>: rgb(<span style="color:#ae81ff">255</span>, <span style="color:#ae81ff">212</span>, <span style="color:#ae81ff">126</span>);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  .<span style="color:#a6e22e">word-color</span>:<span style="color:#a6e22e">nth-child</span><span style="color:#f92672">(</span><span style="color:#f92672">7n</span> <span style="color:#f92672">+</span> <span style="color:#f92672">6</span><span style="color:#f92672">)</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">color</span>: rgb(<span style="color:#ae81ff">248</span>, <span style="color:#ae81ff">140</span>, <span style="color:#ae81ff">131</span>);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  .<span style="color:#a6e22e">word-color</span>:<span style="color:#a6e22e">nth-child</span><span style="color:#f92672">(</span><span style="color:#f92672">7n</span> <span style="color:#f92672">+</span> <span style="color:#f92672">7</span><span style="color:#f92672">)</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">color</span>: rgb(<span style="color:#ae81ff">104</span>, <span style="color:#ae81ff">160</span>, <span style="color:#ae81ff">255</span>);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  @<span style="color:#66d9ef">keyframes</span> <span style="color:#f92672">word</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">0</span><span style="color:#f92672">%</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">opacity</span>: <span style="color:#ae81ff">0.5</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">3</span><span style="color:#f92672">%</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">opacity</span>: <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">9</span><span style="color:#f92672">%</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">opacity</span>: <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">12</span><span style="color:#f92672">%</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">opacity</span>: <span style="color:#ae81ff">0.5</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">100</span><span style="color:#f92672">%</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">opacity</span>: <span style="color:#ae81ff">0.5</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  .<span style="color:#a6e22e">word-animate</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">animation-name</span>: word;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">animation-duration</span>: <span style="color:#ae81ff">20</span><span style="color:#66d9ef">s</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">animation-iteration-count</span>: <span style="color:#66d9ef">infinite</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">will-change</span>: <span style="color:#66d9ef">opacity</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">opacity</span>: <span style="color:#ae81ff">0.5</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  .<span style="color:#a6e22e">word-animate</span>:<span style="color:#a6e22e">nth-child</span><span style="color:#f92672">(</span><span style="color:#f92672">7n</span> <span style="color:#f92672">+</span> <span style="color:#f92672">1</span><span style="color:#f92672">)</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">animation-delay</span>: <span style="color:#ae81ff">0</span><span style="color:#66d9ef">s</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  .<span style="color:#a6e22e">word-animate</span>:<span style="color:#a6e22e">nth-child</span><span style="color:#f92672">(</span><span style="color:#f92672">7n</span> <span style="color:#f92672">+</span> <span style="color:#f92672">2</span><span style="color:#f92672">)</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">animation-delay</span>: <span style="color:#ae81ff">3</span><span style="color:#66d9ef">s</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  .<span style="color:#a6e22e">word-animate</span>:<span style="color:#a6e22e">nth-child</span><span style="color:#f92672">(</span><span style="color:#f92672">7n</span> <span style="color:#f92672">+</span> <span style="color:#f92672">3</span><span style="color:#f92672">)</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">animation-delay</span>: <span style="color:#ae81ff">6</span><span style="color:#66d9ef">s</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  .<span style="color:#a6e22e">word-animate</span>:<span style="color:#a6e22e">nth-child</span><span style="color:#f92672">(</span><span style="color:#f92672">7n</span> <span style="color:#f92672">+</span> <span style="color:#f92672">4</span><span style="color:#f92672">)</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">animation-delay</span>: <span style="color:#ae81ff">9</span><span style="color:#66d9ef">s</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  .<span style="color:#a6e22e">word-animate</span>:<span style="color:#a6e22e">nth-child</span><span style="color:#f92672">(</span><span style="color:#f92672">7n</span> <span style="color:#f92672">+</span> <span style="color:#f92672">5</span><span style="color:#f92672">)</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">animation-delay</span>: <span style="color:#ae81ff">12</span><span style="color:#66d9ef">s</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  .<span style="color:#a6e22e">word-animate</span>:<span style="color:#a6e22e">nth-child</span><span style="color:#f92672">(</span><span style="color:#f92672">7n</span> <span style="color:#f92672">+</span> <span style="color:#f92672">6</span><span style="color:#f92672">)</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">animation-delay</span>: <span style="color:#ae81ff">15</span><span style="color:#66d9ef">s</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  .<span style="color:#a6e22e">word-animate</span>:<span style="color:#a6e22e">nth-child</span><span style="color:#f92672">(</span><span style="color:#f92672">7n</span> <span style="color:#f92672">+</span> <span style="color:#f92672">7</span><span style="color:#f92672">)</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">animation-delay</span>: <span style="color:#ae81ff">18</span><span style="color:#66d9ef">s</span>;
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div><ol start="4">
<li>创建 <code>layouts/_default/terms.html</code> 输入以下代码</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>{{- define &#34;main&#34; }}
</span></span><span style="display:flex;"><span>{{- if .Title }}
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">header</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;page-header&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">h1</span>&gt;{{ .Title }}&lt;/<span style="color:#f92672">h1</span>&gt;
</span></span><span style="display:flex;"><span>    {{- if .Description }}
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;post-description&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        {{ .Description }}
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>    {{- end }}
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">header</span>&gt;
</span></span><span style="display:flex;"><span>{{- end }}
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">ul</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;terms-tags&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;sourrounding_div&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;width:100%;height:100%;min-height: 500px;&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;tag-canvas&#34;</span>&gt;&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/js/wordcloud2.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>    {{- range $key, $value := .Data.Terms.Alphabetical }}
</span></span><span style="display:flex;"><span>    {{ if eq &#34;&#34; ($.Scratch.Get &#34;tagsMap&#34;) }}
</span></span><span style="display:flex;"><span>    {{ $.Scratch.Set &#34;tagsMap&#34; (slice (dict .Name .Count)) }}
</span></span><span style="display:flex;"><span>    {{ else }}
</span></span><span style="display:flex;"><span>    {{ $.Scratch.Add &#34;tagsMap&#34; (slice (dict .Name .Count)) }}
</span></span><span style="display:flex;"><span>    {{ end }}
</span></span><span style="display:flex;"><span>    {{- end }}
</span></span><span style="display:flex;"><span>    {{ $result := ($.Scratch.Get &#34;tagsMap&#34;)}}
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;tag-temp&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;display:none&#34;</span>&gt;{{$result | jsonify }}&lt;/<span style="color:#f92672">span</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//因为前期每个标签值比较小，帮X一个系数
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">XISHU</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">20</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//为了动态宽度
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">div</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">querySelector</span>(<span style="color:#e6db74">&#34;#sourrounding_div&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">canvas</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">querySelector</span>(<span style="color:#e6db74">&#34;#tag-canvas&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">canvas</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">width</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">div</span>.<span style="color:#a6e22e">offsetWidth</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;px&#39;</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">canvas</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">height</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">div</span>.<span style="color:#a6e22e">offsetHeight</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;px&#39;</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">wordFreqData</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">querySelector</span>(<span style="color:#e6db74">&#34;#tag-temp&#34;</span>).<span style="color:#a6e22e">innerHTML</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">jsonObj</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">parse</span>(<span style="color:#a6e22e">wordFreqData</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">arr</span> <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">jsonObj</span>.<span style="color:#a6e22e">forEach</span>(<span style="color:#a6e22e">element</span> =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">key</span> <span style="color:#f92672">=</span> Object.<span style="color:#a6e22e">keys</span>(<span style="color:#a6e22e">element</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">itemArr</span> <span style="color:#f92672">=</span> [<span style="color:#a6e22e">key</span>[<span style="color:#ae81ff">0</span>], <span style="color:#a6e22e">element</span>[<span style="color:#a6e22e">key</span>] <span style="color:#f92672">*</span> <span style="color:#a6e22e">XISHU</span>];
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">arr</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">itemArr</span>);
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//获取当前是暗色还是浅色
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">isDark</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">body</span>.<span style="color:#a6e22e">className</span>.<span style="color:#a6e22e">includes</span>(<span style="color:#e6db74">&#34;dark&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">WordCloud</span>(<span style="color:#a6e22e">canvas</span>, {
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;list&#34;</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">arr</span>,<span style="color:#75715e">//或者[[&#39;各位观众&#39;,45],[&#39;词云&#39;, 21],[&#39;来啦!!!&#39;,13]],只要格式满足这样都可以
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#e6db74">&#34;shape&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;cardioid&#34;</span>, <span style="color:#75715e">//形状 circle (default), cardioid (心型), diamond, square, triangle-forward, triangle, pentagon, and star.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#e6db74">&#34;gridSize&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">20</span>, <span style="color:#75715e">// 密集程度 数字越小越密集
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#e6db74">&#34;weightFactor&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>, <span style="color:#75715e">// 字体大小=原始大小*weightFactor
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#e6db74">&#34;fontWeight&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;normal&#39;</span>, <span style="color:#75715e">//字体粗细
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#e6db74">&#34;fontFamily&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Times, serif&#39;</span>, <span style="color:#75715e">// 字体
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#e6db74">&#34;color&#34;</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">isDark</span> <span style="color:#f92672">?</span> <span style="color:#e6db74">&#39;random-light&#39;</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;random-dark&#39;</span>, <span style="color:#75715e">// 字体颜色 &#39;random-dark&#39; 或者 &#39;random-light&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#e6db74">&#34;backgroundColor&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;none&#39;</span>, <span style="color:#75715e">// 背景颜色
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#e6db74">&#34;classes&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;tag-cloud-item word-color&#34;</span>, <span style="color:#75715e">//用于点击事件
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        });
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">canvas</span>.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#39;wordcloudstop&#39;</span>, <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">e</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//动画
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">setTimeout</span>(() =&gt; {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">els</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">querySelectorAll</span>(<span style="color:#e6db74">&#34;.word-color&#34;</span>);
</span></span><span style="display:flex;"><span>                Array.<span style="color:#a6e22e">from</span>(<span style="color:#a6e22e">els</span>).<span style="color:#a6e22e">forEach</span>((<span style="color:#a6e22e">el</span>) =&gt; {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;动画&#39;</span>, <span style="color:#a6e22e">el</span>)
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">classList</span>.<span style="color:#a6e22e">add</span>(<span style="color:#e6db74">&#34;word-animate&#34;</span>)
</span></span><span style="display:flex;"><span>                })
</span></span><span style="display:flex;"><span>            }, <span style="color:#ae81ff">2000</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//点击
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            document.<span style="color:#a6e22e">querySelectorAll</span>(<span style="color:#e6db74">&#39;.tag-cloud-item&#39;</span>).<span style="color:#a6e22e">forEach</span>(<span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">element</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">text</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">innerHTML</span>;
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">innerHTML</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">`&lt;a href=&#34;/tags/</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">text</span><span style="color:#e6db74">}</span><span style="color:#e6db74">&#34; style=&#34;color: inherit;&#34;&gt;</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">text</span><span style="color:#e6db74">}</span><span style="color:#e6db74">&lt;/a&gt;`</span>;
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">ul</span>&gt;
</span></span><span style="display:flex;"><span>{{- end }}{{/* end main */ -}}
</span></span></code></pre></div><p>参数可以自行修改，可以关注 <code>shape</code> 和 <code>gridSize</code> 等属性</p>
<h2 id="url管理">url管理<a hidden class="anchor" aria-hidden="true" href="#url管理">#</a></h2>
<p>在 <code>hugo.yaml</code> 中添加  <code>permalinks.posts: &quot;/:year/:month/:day/:slug/&quot;</code>
在 <code>archetypes/default.md</code> 中添加 <code>slug: </code>
在每一篇博文中，自己管理slug</p>
<h2 id="为文章添加过期提示">为文章添加过期提示<a hidden class="anchor" aria-hidden="true" href="#为文章添加过期提示">#</a></h2>
<ol>
<li>修改 <code>single.html</code> 文件中，在post-meta后面新增一个div块来展示该信息，代码如下：</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>    {{- if not (.Param &#34;hideMeta&#34;) }}
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;post-meta&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      {{- partial &#34;post_meta.html&#34; . -}}
</span></span><span style="display:flex;"><span>      {{- partial &#34;translation_list.html&#34; . -}}
</span></span><span style="display:flex;"><span>      {{- partial &#34;edit_post.html&#34; . -}}
</span></span><span style="display:flex;"><span>      {{- partial &#34;post_canonical.html&#34; . -}}
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>    {{- end }}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&lt;!-- 添加提示框逻辑 --&gt;</span>
</span></span><span style="display:flex;"><span>    {{- $lastmod := .Lastmod }}
</span></span><span style="display:flex;"><span>    {{- $now := now }}
</span></span><span style="display:flex;"><span>    {{- $duration := $now.Sub $lastmod }}
</span></span><span style="display:flex;"><span>    {{- $daysAgo := $duration.Hours }}
</span></span><span style="display:flex;"><span>    {{- if ge $daysAgo (math.Mul 180 24) }}
</span></span><span style="display:flex;"><span>    {{- if eq site.Params.defaultTheme `dark` -}}
</span></span><span style="display:flex;"><span>    {{- $isDark := &#34;.dark&#34; }}
</span></span><span style="display:flex;"><span>    {{- end -}}
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;post-age-hint&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      这篇文章最后更新已经超过180天了，内容可能已经过时。
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span></code></pre></div><ol start="2">
<li>为该div块定制样式，在 <code>assets/css/extended</code> 目录下新增 <code>custom.css</code> 文件，输入以下代码，颜色可以随自己喜欢调整</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>:<span style="color:#a6e22e">root</span> {
</span></span><span style="display:flex;"><span>    --post-age-hint-bg-color: <span style="color:#ae81ff">#d4d4d4</span>ac;
</span></span><span style="display:flex;"><span>    --post-age-hint-color: <span style="color:#ae81ff">#26b3fe</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">dark</span> {
</span></span><span style="display:flex;"><span>    --post-age-hint-bg-color: <span style="color:#ae81ff">#6d6c6c</span>ac;
</span></span><span style="display:flex;"><span>    --post-age-hint-color: <span style="color:#ae81ff">#ff7723</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">post-age-hint</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">background-color</span>: <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>post<span style="color:#f92672">-</span>age<span style="color:#f92672">-</span>hint<span style="color:#f92672">-</span>bg<span style="color:#f92672">-</span><span style="color:#66d9ef">color</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/* 深灰色背景 */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">color</span>: <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>post<span style="color:#f92672">-</span>age<span style="color:#f92672">-</span>hint<span style="color:#f92672">-</span><span style="color:#66d9ef">color</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/* 浅灰色文字 */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">padding</span>: <span style="color:#ae81ff">10</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">border-left</span>: <span style="color:#ae81ff">3</span><span style="color:#66d9ef">px</span> <span style="color:#66d9ef">solid</span> <span style="color:#ae81ff">#ff6666</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/* 红色边框，醒目但不刺眼 */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">margin</span>: <span style="color:#ae81ff">20</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">border-radius</span>: <span style="color:#ae81ff">5</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/* 圆角边框 */</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/* 添加一个过渡效果，鼠标悬停时改变边框颜色 */</span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">post-age-hint</span>:<span style="color:#a6e22e">hover</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">border-color</span>: <span style="color:#ae81ff">#ff9999</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>这段代码中，定义了两个变量用于适配不同主题，默认的白色主题，会使用root中的两个颜色，当切换到dark时，会使用.dark中定义的颜色</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://www.zanks.link/tags/hugo/">Hugo</a></li>
      <li><a href="https://www.zanks.link/tags/papermod/">PaperMod</a></li>
      <li><a href="https://www.zanks.link/tags/%E5%BB%BA%E7%AB%99/">建站</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://www.zanks.link/2024/01/01/hugo-3/">
    <span class="title">« 上一页</span>
    <br>
    <span>【Hugo】体验篇：Obsidian写作</span>
  </a>
  <a class="next" href="https://www.zanks.link/2024/01/01/hugo-1/">
    <span class="title">下一页 »</span>
    <br>
    <span>【Hugo】基础篇：个人博客搭建</span>
  </a>
</nav>

  </footer><div class="comments-title" id="comments-title">
    <p class="x-comments-title">欢迎来到评论区</p>
    <p style="font-size: 1rem">感谢您的耐心阅读！如需交流，请留个评论吧！ </p>
</div>

<div>
    
    <div id="tcomment"></div>
    <script src="https://cdn.jsdelivr.net/npm/twikoo@1.6.40/dist/twikoo.all.min.js"></script>
    <script>
    twikoo.init({
      envId: 'https://zanks-twikoo.netlify.app/.netlify/functions/twikoo', 
      el: '#tcomment', 
      
      
      
    })
    </script>
</div>

</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2025 - 2024 · <a href="https://www.zanks.link/">乱话三千</a></span> · 
    
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>


<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = '复制';

        function copyingDone() {
            copybutton.innerHTML = '已复制！';
            setTimeout(() => {
                copybutton.innerHTML = '复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script></body>

</html>
